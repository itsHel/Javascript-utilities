<title>TryIt Editor</title>
<link rel=icon href="https://cdn.discordapp.com/emojis/474325997181730826.png?v=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<link href="_buttons.css" rel="stylesheet">

<style>
    body{
        line-height: 1.6;
        color: #4f4f4f;
        font-family: "Roboto",sans-serif;

        margin:60px auto;
        max-width:1100px;
        font-size:22px;
        background:rgba(0,0,0,0.05);
        font-family: 'Comic Sans MS', 'Comic Sans' !important;
    }
    button{
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }
    #drop-wrapper, body > div{
        font-family: unset;
        padding:2rem;
        border-radius:0.5rem;
        border: 1px solid #d3d8db;
        box-shadow: 0 1px 1px rgba(0,0,0,.05);
        background:white;
        margin-bottom:18px;
    } 
    #drop-wrapper{
        height:650px;
        position:relative;
    }
    .highlight{
        border:2px dashed red !important;
    }
    #movable{
        height:100px;
        width:100px;
        background: orange;
        position:absolute;
    }
    label{
        font-size: 16px;
        min-width: 0;
    }
    #inputs{
        display: flex;
        justify-content: space-between;
    }
    #inputs > *{
        margin-right:6px;
    }
    .material-icons-outlined{
        font-size:32px;
    }
</style>

<script>
    window.addEventListener("load", function(){
        document.querySelectorAll(".ripple-button, .ripple-hollow-button").forEach(button => {
            addRipple(button);
        });
    });

    function addRipple(button){
        button.addEventListener("click", function(e){
            let x, y;
            if((e.originalEvent || e).isTrusted){
                x = e.offsetX;
                y = e.offsetY;
            } else {
                x = e.target.clientWidth / 2;
                y = e.target.clientHeight / 2;
            }

            let html = "<span class='ripple' style='left:" + x + "px;top:" + y + "px;'></span>";

            button.insertAdjacentHTML("beforeend", html);
        
            setTimeout(function(){
                button.querySelector(".ripple").remove();
            }, 1000);
        });
    }

</script>

<body>
    <!-- *************************************************** Db *************************************************** -->
    <div style="display:flex; justify-content: space-around;">
        <button id=db-add class="button-gradient bg-lightblue ripple-button">Test</button>
        <div id=db-result>_</div>
        <button id=db-add-time class="button-gradient bg-yellow ripple-button">Add</button>
        <div id=db-time-result>_</div>
        <button id=db-show-time class="button-gradient bg-red ripple-button">Show</button>
    </div>

    <script>
        // *************************************************** Google notes ***************************************************
        const style = "position:absolute; left:115%; top:0; padding-left:3px; color:#4d5156; max-width:250px; white-space: nowrap; text-overflow:ellipsis; border-left:3px solid #42464a;";
        let links = document.querySelectorAll(".yuRUbf");
        // fsf search
        let data = {
            "www.root.cz": "THIS IS ROOT",
            "twitter.com": "TWITTER -----",
            "something": "somethhhhhh"
        };
        
        // Add icons
        const svgStyle = 'style="width:9px;height:9px;margin-bottom:1px;"';
        const svgPac = '<svg id=mysvg viewBox="0 0 541.6 571.11" ' + svgStyle + '><path style="fill:#70757a" d="M535.441,412.339A280.868,280.868 0 1,1 536.186,161.733L284.493,286.29Z"/></svg>';
        
        document.querySelectorAll(".eFM0qc > span").forEach(linkNav => {
            let div = "<div class='link-add-note' style='display: inline-block; visibility:visible; margin-right:6px;'>" + svgPac + "</div>";

            linkNav.insertAdjacentHTML('afterend', div);
            linkNav.parentNode.querySelector(".link-add-note").addEventListener("click", addNote);

            function addNote(){
                // Copy from page notes ?
            }
        });

        // Add data
        links.forEach(link => {
            let href = link.querySelector("a").href;
            let match = href.match(/\/\/(.+?)(\/|$)/);
            if(!match)
                return;
            
            let url = match[1];

            if(!data.hasOwnProperty(url))
                return;

            console.log(href);
            console.log(url);

            link.style.position = "relative";

            let text = data[url];
            let div = "<div title='" + text + "' style='" + style + "'>" + text + "</div>";

            link.insertAdjacentHTML('beforeend', div);
        });

        // *************************************************** indexedDB ***************************************************
        // indexedDB.deleteDatabase("store");

        let openRequest = indexedDB.open("store", 5);

        openRequest.onupgradeneeded = function() {
            console.log("onUpdageEnded");

            let db = openRequest.result;

            let books = this.transaction.objectStore("books");
            let index = books.createIndex('price_idx', 'price');

            if (!db.objectStoreNames.contains('books')) {                                   // if there's no "books" store
                db.createObjectStore('books', {keyPath: 'id', autoIncrement: true});        // create it
            }
        }

        openRequest.onerror = function() {
            console.error("onError", openRequest.error);
        };

        openRequest.onsuccess = function() {
            console.log("onSuccess");
            let db = openRequest.result;

            // db.createObjectStore("books", {keyPath: "id", autoIncrement: true});
        };

        openRequest.onblocked = function() {
            console.log("onBlocked");
            // this event shouldn't trigger if we handle onversionchange correctly

            // it means that there's another open connection to the same database
            // and it wasn't closed after db.onversionchange triggered for it
        };

        document.querySelector("#db-add").addEventListener("click", function(){
            let db = openRequest.result;

            let transaction = db.transaction("books", "readwrite");
            let books = transaction.objectStore("books");

            let book = {price: 11, created: new Date()};
            let book2 = {price: 11, created: new Date()};

            let request = books.add(book);
            let request2 = books.add(book2);

            let priceIndex = books.index("price_idx");
            // let request3 = books.get(2);
            let request3 = books.getAll(IDBKeyRange.only(2));
            let request4 = priceIndex.getAll(IDBKeyRange.upperBound(20));
            // console.log(mybook);

            request.onsuccess = function() { 
                console.log("onSuccess Book added to the store", this.result);
            };
            request.onerror = function() {
                console.log("onError", this.error);
            };

            request2.onsuccess = function() { 
                console.log("onSuccess Book added to the store", this.result);
            };
            request2.onerror = function() {
                console.log("onError", this.error);
            };

            request3.onsuccess = function() { 
                console.log("search 3 result:");
                console.log(this.result);
            };
            request3.onerror = function() {
                console.log("search 3 error: ", this.error);
            };

            request4.onsuccess = function() { 
                console.log("search 4 result:");
                console.log(this.result);
            };
            request4.onerror = function() {
                console.log("search 4 error: ", this.error);
            };

            // Short syntax
            db.transaction("books").objectStore("books").get(4).onsuccess = function(event) {
                console.log(event);
                console.log(this.result);
                console.log("Id 4 result price:  " + event.target.result.price);

                let data = this.result;
                data.price += 100;

                let objectStore = db.transaction("books", "readwrite").objectStore("books");
                let requestUpdate = objectStore.put(data);
            };
        });


        let cols = ['darkred', 'lightblue'];
        let x = {
            darkred: ['2021-12-02 08:46:40', '2021-12-02 08:49:40', '2021-12-02 09:40:40', '2021-12-02 09:48:40'],
            lightblue: ['2021-12-03 08:06:40', '2021-12-03 08:46:40']
        };
        let show = document.querySelector("#db-time-result");

        document.querySelector("#db-add-time").addEventListener("click", function(){
            addD(this.textContent);
        });

        
        document.querySelector("#db-show-time").addEventListener("click", function(){
            let db = _openRequest.result;
            let colors = db.transaction("colors", "readwrite").objectStore("colors");

            colors.getAll().onsuccess = function(){
                console.warn("getAll:");
                console.log(this.result);
            }
        });

        // async function setCount(type){
        //     let db = _openRequest.result;
        //     let transaction = db.transaction("colors", "readwrite");
        //     let colors = transaction.objectStore("colors");

        //     let typeIndex = colors.index("type");

        //     typeIndex.getAll(IDBKeyRange.only(type)).onsuccess = function(){
        //         console.log(this.result.length);
                
        //         let target = document.querySelector("#target");
        //         target.textContent = this.result.length;
        //     };
        // }

        // function getCount(type){
        //     let db = _openRequest.result;
        //     let transaction = db.transaction("colors", "readwrite");
        //     let colors = transaction.objectStore("colors");

        //     let typeIndex = colors.index("type");
            
        //     return new Promise(resolve => {
        //         typeIndex.getAll(IDBKeyRange.only(type)).onsuccess = function(){
        //             resolve(this.result.length);
        //             console.log("success");
        //         };
        //     })
        // }


        // *************************************************** Inks ***************************************************
        
        // time, created, colors
        let _openRequest = indexedDB.open("time", 1);

        function init(){
            _openRequest.onupgradeneeded = function() {
                let db = _openRequest.result;

                if (!db.objectStoreNames.contains('colors')) {                                  // if there's no "books" store
                    db.createObjectStore('colors', {keyPath: 'id', autoIncrement: true});       // create it
                }

                this.transaction.objectStore("colors").createIndex('type', 'type');
                this.transaction.objectStore("colors").createIndex('created', 'created');
            }

            _openRequest.onerror = function() {
                console.error("onError", this.error);
            };

            _openRequest.onsuccess = function() {
                console.log("INIT");

                let db = this.result;
                let colors = db.transaction("colors", "readwrite").objectStore("colors");

                colors.getAll().onsuccess = function(){
                    console.warn("getAll:");
                    console.log(this.result);

                    let data = this.result;

                    let unique = {};
                    data.forEach(record => {
                        if(unique.hasOwnProperty(record.type)){
                            ++unique[record.type];
                        } else {
                            unique[record.type] = 1;
                        }
                    });

                    // Parse data ?
                    let realData = {};
                    data.forEach(record => {
                        if(!realData.hasOwnProperty(record.type)){
                            realData[record.type] = [];
                        }

                        realData[record.type].push(record.created);
                    });
                    //

                    console.log(unique);
                    console.log(realData);

                    // Do stuff
                    
                }
            };
        }

        function addD(type){
            let now = new Date().toLocaleString("sv");

            let db = _openRequest.result;
            let colors = db.transaction("colors", "readwrite").objectStore("colors");

            let col = {type: type, created: now};

            // colors.add(col).onsuccess = function() { 
            //     console.log("onSuccess col added to the store", this.result);
            // };

            colors.add(col);
        }

        init();

        // https://gist.github.com/inexorabletash/704e9688f99ac12dd336
    </script>

    <!-- *************************************************** Buttons *************************************************** -->
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button-gradient bg-lightblue ripple-button">Lightblue</button>
        <button class="button-gradient bg-red ripple-button">Red</button>
        <button class="button-gradient bg-green ripple-button">Green</button>
        <button class="button-gradient bg-blue ripple-button">Blue</button>
        <button class="button-gradient bg-yellow ripple-button">Yellow</button>
        <button class="button-gradient bg-black ripple-button">Black</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="icon-button ib-red"><span class=icon-text>Ib Red</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-yellow"><span class=icon-text>Ib Yellow</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-blue sm"><span class=icon-text>Ib Blue sm</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-lightblue"><span class=icon-text>Ib Lblue</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-black"><span class=icon-text>Ib Black</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="button ripple-button">Ripple</button>
        <button class="button ripple-hollow-button">Hollow</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button ripple-button b-orange">Button</button>
        <button class="button ripple-button b-red">Button</button>
        <button class="button ripple-button b-red include-icon-button">Button</button>
        <button class="button ripple-button b-purple">Button</button>
        <button class="button ripple-button b-gray">Button</button>
    </div>

    <!-- *************************************************** Yesterday *************************************************** -->
    <script>
        let but = $(".include-icon-button");
        but.on("click", function(e){
            if(e.offsetX > but[0].offsetWidth){
                // :after click
                let yesterday = new Date(Date.now() - 86_400_000); 
            } else {
                // button click

            }
        });
    </script>

    <style>
        .include-icon-button{
            position: relative;
            overflow: visible;
        }
        .include-icon-button:after{
            content: "";
            position: absolute;
            height: 48px;
            width:48px;
            left:110%;
            top:0;
            border:1px solid rgba(0,0,0,0.15);
            border-radius: 50%;

            background-position: center;
            background-repeat: no-repeat;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' height='32px' viewBox='0 0 24 24' width='32px' fill='rgb(33,33,33)'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z'/></svg>");
        }
    </style>

    <!-- *************************************************** Inputs *************************************************** -->
    <div id=inputs>
        <label class="input-placeholder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-color">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-noborder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>
    </div>

    <style>
        :root{
            --input-font-size: 18px;
            --input-focus-color: crimson;
        }
        .input-placeholder{
            position:relative;
            border:2px solid black;
            border-radius:4px;
            display: inline-block;
            transition: all 0.25s;
        }
        .input-placeholder span{
            position: absolute;
            font-size: var(--input-font-size);
            top:0;
            left:0;
            margin: calc(var(--input-font-size) / 2.5) calc(var(--input-font-size) / 2.5 - 2px);
            padding:0 2px;
            transition: all 0.25s;
            pointer-events: none;
        }
        .input-placeholder input{
            all:unset;
            cursor:text;
            padding: calc(var(--input-font-size) / 2.5);
            font-size: var(--input-font-size);
            display: block;
            transition: all 0.25s;
        }
        .input-placeholder input::placeholder{
            opacity:0;
        }
        .input-placeholder:focus-within span, .input-placeholder input:not(:placeholder-shown) + span{
            font-size: calc(var(--input-font-size) - 2px);
            top:-55%;
            background:white;
        }
    
        .input-placeholder-color:focus-within{
            border:2px solid var(--input-focus-color);
        }
        .input-placeholder-color:focus-within span{
            color: var(--input-focus-color);
        }
    
        .input-placeholder-noborder{
            border-radius:0;
            border:none;
            border-bottom: 2px solid black;
        }
        .input-placeholder-noborder input, .input-placeholder-noborder span{
            margin-left:0;
            padding-left:0;
        }
        .input-placeholder-noborder:focus-within span, .input-placeholder-noborder input:not(:placeholder-shown) + span{
            opacity:0.5;
        }
    </style>

    <!-- *************************************************** Checkboxes *************************************************** -->
    <div>
        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>
    </div>

    <!-- *************************************************** Radio-line *************************************************** -->
    <div>
        <div id=radios>
            <label>
                <input class=radio type=radio name=myradio>
                <span>First</span>
            </label>
            <label>
                <input class=radio type=radio name=myradio>
                <span>Second</span>
            </label>
            <label>
                <input class=radio type=radio name=myradio>
                <span>Third</span>
            </label>
            <div class=radio-line></div>
        </div>
    </div>

    <style>
        :root{
            --line-color: crimson;
        }
        .radio{
            padding:4px;
            position: relative;
            display: inline-block;
            text-align: center;
            display: none;
        }
        .radio input:checked + span:after{
            transition-delay: 0s;
            left:0;
            width:100%;
        }
        #radios{
            position: relative;
            display: inline-block;
        }
        #radios label{
            cursor:pointer;
            padding:5px;
            margin:10px;
        }
        .radio-line{
            position: absolute;
            width:100%;
            height:2px;
            background: var(--line-color);
            left:0;
            top:115%;
            width:0;
        }
    </style>

    <script>
        myRadio(document.querySelector("#radios"));

        function myRadio(wrapper, shiftTime = 250){
            let timeout;
            let line = wrapper.querySelector(".radio-line");
            line.style.transition = shiftTime + "ms";

            // Must be mousedown to get :checked element before its changed
            wrapper.addEventListener("mousedown", function(e){
                let clickedEl = e.target.closest("label");

                if(clickedEl){
                    let thisWidth = clickedEl.offsetWidth;
                    let thisLeft = clickedEl.offsetLeft;
                    
                    if(line.style.width == "0" || line.style.width == ""){
                        // First click
                        line.style.left = thisLeft;
                        line.style.width = thisWidth + "px";
                    } else {
                        let lastIndex = Array.from(wrapper.children).indexOf(wrapper.querySelector(":checked").parentNode);
                        let newIndex = Array.from(wrapper.children).indexOf(clickedEl);

                        if(newIndex == lastIndex)
                            return;

                        clearTimeout(timeout);
                        
                        if(newIndex > lastIndex){
                            // Left to right

                            let fullWidth = clickedEl.offsetLeft - line.offsetLeft + clickedEl.offsetWidth;
                            
                            line.style.left = line.offsetLeft + "px";
                            line.style.right = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.left = clickedEl.offsetLeft + "px"
                            }, shiftTime);
                        } else {
                            // Right to left

                            let lineOffsetRight = line.offsetLeft + line.offsetWidth
                            let rightPos = clickedEl.parentNode.offsetWidth - lineOffsetRight;
                            let fullWidth = lineOffsetRight - clickedEl.offsetLeft;

                            line.style.right = (rightPos) + "px";
                            line.style.left = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.right = (clickedEl.parentNode.offsetWidth - (clickedEl.offsetLeft + clickedEl.offsetWidth)) + "px"
                            }, shiftTime);
                        }
                    }
                }
            });
        }
    </script>

    <!-- *************************************************** Fill button *************************************************** -->
    <div>
        <div class=fill-button>text</div>
    </div>

    <style>
        /* .fill-button{
            position: relative;
            padding:0.75rem 1rem;
            text-align:center;
            background:black;
            overflow:hidden;
            border: 1px solid #d3d8db; 
            box-shadow: 0 1px 1px rgba(0,0,0,.05); 
            cursor:pointer;
        }
        .fill-button span{
            background:white;
            transition: width 0.7s, padding-top 0.7s;
            width: 0;
            padding-top:0;
            position: absolute;
            border-radius:100%;
            transform: translate(-50%, -50%);
            z-index: 0;
        }
        .fill-button text{
            color:white;
            position: relative;
            z-index: 1;
            transition: color 0.7s;
        }
        .fill-button:hover span{
            width:calc(105% * 2);
            padding-top:calc(105% * 2);
        }
        .fill-button:hover text{
            color:black;
        } */
    </style>
    <script>
        // _fillButtons(document.querySelectorAll(".fill-button"));

        // function _fillButtons(buttons){
        //     buttons.forEach(button => {
        //         let fill = button.querySelector("span");

        //         button.addEventListener("mouseover", function(e){
        //             fill.style.left = e.pageX - button.offsetLeft + "px";
        //             fill.style.top = e.pageY - button.offsetTop + "px";
        //         });
        //         button.addEventListener("mouseout", function(e){
        //             fill.style.left = e.pageX - button.offsetLeft + "px";
        //             fill.style.top = e.pageY - button.offsetTop + "px";
        //         });
        //     });
        // }

        fillButtons(document.querySelectorAll(".fill-button"));

        function fillButtons(buttons){
            buttons.forEach(button => {
                button.innerHTML = "<span></span><text>" + button.textContent + "</text>";
                let fill = button.querySelector("span");

                button.addEventListener("mouseover", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
                button.addEventListener("mouseout", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
            });

            const style = `<style>.fill-button{ position: relative; padding:0.75rem 1rem; text-align:center; background:black; overflow:hidden; border: 1px solid #d3d8db; box-shadow: 0 1px 1px rgba(0,0,0,.05); cursor:pointer;} 
                            .fill-button span{ background:white; transition: width 0.7s, padding-top 0.7s; width: 0; padding-top:0; position: absolute; border-radius:100%; transform: translate(-50%, -50%); z-index: 0; } 
                            .fill-button text{ color:white; position: relative; z-index: 1; transition: color 0.7s; } .fill-button:hover span{ width:calc(105% * 2); padding-top:calc(105% * 2); } .fill-button:hover text{ color:black; }</style>`;

            document.querySelector("html").insertAdjacentHTML("beforeend", style);
        }
    </script>

    <!-- *************************************************** Strike shift *************************************************** -->
    <div>
        <div class="strike-container" style="margin-bottom:0;">
            <ul style="list-style-type:none;padding:0;margin:0;display:inline;">
                <li><span>Home</span></li>
                <li><span>About us</span></li>
                <li><span>Contact</span></li>
            </ul>
            <svg id=mysvg viewBox="0 0 541.6 571.11"> <path style="fill:black" d="M535.441,412.339A280.868,280.868 0 1,1 536.186,161.733L284.493,286.29Z"/> </svg>
        </div>

        <style>
            #mysvg{
                width:20px;
                height:20px;
            }

            .strike-container li{
                display:inline-block;
            }
            .strike-container span {
                padding: 0 20px;
                position: relative;
                display: inline-block;
                cursor: pointer;
            }
            .strike-container span:before {
                content: '';
                position: absolute;
                width: 0%;
                height: 2px;
                top: 50%;
                margin-top: -0.5px;
                background: #000;
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
                right: -5px;
            }
            .strike-container span:hover:before {
                left: -5px;
                width: calc(100% + 10px);
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
            }
        </style>
    </div>

    <!-- *************************************************** Tooltips *************************************************** -->
    <div id=tooltip-wrapper>
        <div id=tooltip class=tooltips>Tooltip something</div>
        <div id=tooltip1 class=tooltips>Tooltip 1 something</div>
        <div id=tooltip2 class=tooltips>Tooltip 2 something</div>
    </div>

    <style>
        .tooltips{
            transform: scale(0.7);
            opacity:0;
            transition: transform 325ms, opacity 325ms; 
            transition-timing-function: cubic-bezier(.54,1.5,.38,1.11);
            text-align: center;
            border:1px solid rgba(0,0,0,0.15);
            padding:8px;
            border-radius: 10px;
        }
        .tooltips:hover{
            opacity:1;
            transform: scale(1) translateY(-10px);
        }
        #tooltip1{
            transition-timing-function: cubic-bezier(0.375, 0.785, 0.32, 1.175);
        }
        #tooltip2{
            transition-timing-function: cubic-bezier(.38,.33,.37,1.67);
        }
    </style>

    <!-- *************************************************** icons *************************************************** -->
    <!-- <style>

    </style>

    <div>
        <ul id=glowing>
            <li>
                <i class="material-icons-outlined">mood</i>
            </li>
            <li>
                <i class="material-icons-outlined">hot_tub</i>
            </li>
            <li>
                <i class="material-icons-outlined">bathtub</i>
            </li>
        </ul>
    </div> -->

    <!-- *************************************************** Animated svg *************************************************** -->
    
    <!-- pathLength=1 must be set, otherwise base stroke-dashoffset & stroke-dasharray on path.getTotalLength(); -->
    <style>
        #svg{
            width:50px;
            color:crimson;
            cursor:pointer;
        }
        #svg path{
            transition: all 0.8s;
            stroke-dashoffset: 0;
            stroke-dasharray: 1;
        }
    </style>

    <div style="display: flex; justify-content:space-around;">
        <svg id=svg viewBox="0 2 24 24" aria-hidden="true" focusable="false"><path pathLength=1 fill="none" stroke="currentColor" stroke-width="3" d="M1.73 12.91l6.37 6.37L22.79 4.59"/></svg>
        
        <div class="trapdoor" style="position:relative;">
            <div class="top door"></div>
            <div class="bottom door"></div>
            <div class="door-inside">Hi</div>
        </div>
    </div>

    <script>
        document.querySelector("#svg").addEventListener("click", function(){
            let path = this.querySelector("path");

            path.style.strokeDashoffset = Number(!Number(path.style.strokeDashoffset));
        });

    </script>
    
    <!-- *************************************************** Trapdoor *************************************************** -->
    <style>
        :root{
            --door-font-size: 30px;
        }
        .trapdoor {
            transform: translateZ(0px);
            -webkit-font-smoothing: antialiased;
            width: 200px;
            height: 50px;
            box-shadow: inset -7px 0px 12px -8px rgba(0, 0, 0, 0.3), inset 7px 0px 12px -8px rgba(0, 0, 0, 0.3);
            background: rgba(0, 0, 0, 0.25);
            transition: background 400ms ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .door-inside{
            font-size: var(--door-font-size);
        }
        .trapdoor:hover {
            background: #fff;
        }
        .trapdoor:hover .door {
            box-shadow: 0px 0px 10px -2px rgba(0, 0, 0, 0.4);
            transform: scale(1.08);
        }
        .trapdoor:hover .top {
            top: -50%;
        }
        .trapdoor:hover .bottom {
            top: 100%;
        }
        .top {
            top: 0%;
            left: 0px;
        }
        .top:before {
            top: -5px;
            top: calc(-1 * var(--door-font-size) + 27px);
        }
        .bottom {
            top: 50%;
            left: 0px;
        }
        .bottom:before {
            top: -30px;
            top: calc(-1 * var(--door-font-size) + 2px);
        }
        .door {
            transition: top 400ms, box-shadow 200ms, transform 300ms;
            transition-timing-function: ease-in-out;
            background-color: #fff;
            position: absolute;
            overflow: hidden;
            width: 100%;
            z-index: 2;
            height: 50%;
        }
        .door:before {
            position: absolute;
            font-size: var(--door-font-size);
            display: block;
            color: #4099FF;
            content: "Door";
            width: 100%;
            height: 20px;
            text-align:center;
        }
    </style>

    <!-- *************************************************** Info clip-path *************************************************** -->
    <div id=info-wrapper>
        <div id=info>
            <span class=ico>i</span>
            <div class=text>
                Sone info text<br>...and more
            </div>
        </div>
    </div>

    <style>
        #info{
            padding:2.5rem 2rem;
            clip-path: circle(5% at 96% 14%);
            transition: all ease-in-out .3s;
            max-width: 500px;
            background: black;
            position: relative;
            border-radius:20px;
        }
        #info .ico{
            color:white;
            position:absolute;
            top:0px;
            right:1.2rem;
            font-weight: bold;
            font-size:1.5rem;
            transition: all ease-in-out .3s;
        }
        #info .text{
            color:white;
            background: transparent;
        }
        #info:hover, #info:focus{
            clip-path: circle(75%);
            outline:none;
        }
        #info:hover .ico, #info:focus .ico{
            opacity:0;
        }
    </style>

    <!-- *************************************************** Hover outside buttons *************************************************** -->
    <div id=hover-close>
        <div class=added-text>
            <div class=text>Some texttttttt<br>...and more</div>
            <div class=close-wrapper>
                <span class=ico>X</span>
            </div>
        </div>
    </div>

    <style>
        .added-text{
            position: relative;
            border: 2px solid black;
            box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.23);
            transition: box-shadow 0.2s;
            display: inline-block;
            transform-origin: top left;
            /* backface-visibility: hidden;
            -webkit-backface-visibility: hidden; */
            -webkit-transform: translateZ(0) scale(1.0, 1.0);
            transform: translateZ(0);
        }
        .added-text .text{
            outline:none;
            position: relative;
            background-color:rgba(255,255,255,0.85);
            padding:1rem 1rem;
            white-space: pre-line;
            z-index:1000;
        }
        .added-text:focus-within{
            box-shadow: 0 0 12px #000000;
        }
        .added-text .ico{
            position: absolute;
            top:25%;
            right:25%;
            border-radius: 50%;
            border:none;
            cursor: pointer;
            transition: all 0.25s;
            color:black;
            opacity:0;
        }
        .added-text:hover .close-wrapper, .added-text:focus-within .close-wrapper{
            width: 10rem;
            height: 10rem;
        }
        .added-text:hover .ico, .added-text:focus-within .ico{
            opacity: 1;
        }
        .close-wrapper{
            border:1px solid red;
            position: absolute;
            width:0;
            height:0;
            top:0;
            right:0;
            z-index:999;
            transition: 0.25s cubic-bezier(0.25, 0, 0, 1);
            transform: translate(50%, -50%) translateZ(0);
            /* backface-visibility: hidden;
            -webkit-backface-visibility: hidden; */
        }
    </style>

    <!-- *************************************************** Movable cube + canvas *************************************************** -->
    <div id=drop-wrapper>
        <div id=movable draggable=true></div>
    </div>

    <div id=canvas-wrapper>
        <canvas id=canvas style="border:2px dashed DeepSkyBlue"></canvas>
     </div>
 
     <div>
         <img id=reflect-canvas>
     </div>
    
    <script>        
        // Text
        $("#loading").on("click", function(e){
            if(e.target.classList.contains("editable"))
                return;
            let x = e.offsetX;
            let y = e.offsetY;
            console.log(y);
            $("<div class='editable b' contenteditable=true></div>").appendTo("#loading").css({backgroundColor:"rgba(255,255,255,0.666)", minWidth:"75px", padding:"0.5rem 1rem", width:"px",height:"px",border: "1px solid orange", position:"absolute", top:y+"px", left:x+"px"}).focus();
        });

        // Canvas
        const canvas = document.getElementById("canvas");
        
        canvas.width = $(canvas.parentNode).width() - 4;        // - border
        canvas.height = 440;
        let coord = { x: 0, y: 0 };
        var ctx = canvas.getContext("2d");

        $(window).on("mousedown", start);
        $(window).on("mouseup", stop);

        function start(e){
            $(window).on("mousemove", draw);
            coord.x = e.offsetX;
            coord.y = e.offsetY;
        }
        function stop(e){
            $(window).off("mousemove");
        }

        function draw(e){
            if(e.target.nodeName.toLowerCase() != "canvas"){
                $(window).off("mousemove");
                return;
            }

            ctx.beginPath();
            ctx.lineWidth = 5;
            ctx.lineCap = "round";
            ctx.strokeStyle = "red";
            ctx.moveTo(coord.x, coord.y);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            coord.x = e.offsetX;
            coord.y = e.offsetY;
            
            $("#reflect-canvas").attr("src", document.getElementById("canvas").toDataURL());
        }

    </script>

    <script>
        var differenceX, differenceY;        // Position of mouseX/Y in object

        $("#drop-wrapper").each(function(index){
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(function(event){
                $(this).on(event, preventDefaults);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).addClass("highlight");});
            });
 
            ['dragleave', 'drop'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).removeClass("highlight")});
            });

            $(this).on("drop", function(e){
                let dropX, dropY;

                if(e.target.id == "movable"){
                    // Dropping object in itself has different offsetX/Y
                    dropX = e.target.offsetLeft + e.offsetX;
                    dropY = e.target.offsetTop + e.offsetY;
                } else {
                    dropX = e.offsetX;
                    dropY = e.offsetY;
                }

                let newX = dropX - differenceX;
                let newY = dropY - differenceY;
                $("#movable").css({top: newY, left: newX});
            });
        });
        
        $("#movable").on("dragstart", function(e){
            differenceX = e.offsetX;
            differenceY = e.offsetY;
            e.target.style.filter = "grayscale(0.8)";
        });
        
        $("#movable").on("dragend", function(e){
            e.target.style.filter = "grayscale(0)";
        });

        function preventDefaults(e){
            e.preventDefault();
            e.stopPropagation();
        }
    </script>

    <script>
        $(function(){
            // Modal
            // Show only once per session
            if(true || sessionStorage["modalshown"])
                return;

            // Css
            $("body").append(`<style>#z-modal-full{ top:0; left:0; position: fixed; height:100%; width:100%; display:flex; justify-content: center; align-items: center; background:rgba(0,0,0,0.5); cursor:pointer; } #z-wrapper{ padding:20px; background:white; cursor:default; height:auto; box-shadow: 0px 0px 30px 0px rgb(2 2 2); border-radius:5px; } #z-wrapper { max-width:80%; } #z-wrapper img{ width:100%; } @media (max-width: 850px) { #z-wrapper { max-width:95%; } }</style>`);
            
            // Modal html
            $("<div id=z-modal-full><div id=z-wrapper><img src='https://image.freepik.com/free-photo/galaxy-system-millions-billions-stars-together-with-gas-dust_39386-369.jpg'></div></div>").hide().appendTo("body").fadeIn();
            
            $("#z-modal-full").on("click", function(e){
                if(e.target.id == "z-modal-full"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
            $(window).on("keydown", function(e){
                console.log(e);
                if(e.key == "Escape"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
        });
    </script>

    <style>
        #z-modal-full{
            top:0;
            left:0;
            position: fixed;
            height:100%;
            width:100%;
            display:flex;
            justify-content: center;
            align-items: center;
            background:rgba(0,0,0,0.5);
            cursor:pointer;
        }
        #z-wrapper{
            padding:20px;
            background:white;
            cursor:default;
            height:auto;
            box-shadow: 0px 0px 30px 0px rgb(2 2 2);
            border-radius:5px;
        }
        #z-wrapper {
            max-width:80%;
        }

        #z-wrapper img{
            width:100%;
        }
        #canvas{
            cursor:crosshair;
            width:100%;
        }
        @media (max-width: 850px) {
            #z-wrapper {
                max-width:95%;
            } 
        }
    </style>
