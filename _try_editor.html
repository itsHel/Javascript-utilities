<title>TryIt Editor</title>
<link rel=icon href="https://cdn.discordapp.com/emojis/474325997181730826.png?v=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<link href="_buttons.css" rel="stylesheet">

<style>
    body{
        line-height: 1.6;
        color: #4f4f4f;
        font-family: "Roboto",sans-serif;

        margin:60px auto;
        max-width:1100px;
        font-size:22px;
        background:rgba(0,0,0,0.05);
        font-family: 'Comic Sans MS', 'Comic Sans' !important;
    }
    button{
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }
    #drop-wrapper, body > div{
        font-family: unset;
        padding:2rem;
        border-radius:0.5rem;
        border: 1px solid #d3d8db;
        box-shadow: 0 1px 1px rgba(0,0,0,.05);
        background:white;
        margin-bottom:18px;
    } 
    #drop-wrapper{
        height:650px;
        position:relative;
    }
    .highlight{
        border:2px dashed red !important;
    }
    #movable{
        height:100px;
        width:100px;
        background: orange;
        position:absolute;
    }
    label{
        font-size: 16px;
        min-width: 0;
    }
    #inputs{
        display: flex;
        justify-content: space-between;
    }
    #inputs > *{
        margin-right:6px;
    }
</style>

<script>
    window.addEventListener("load", function(){
        document.querySelectorAll(".ripple-button, .ripple-hollow-button").forEach(button => {
            addRipple(button);
        });
    });

    function addRipple(button){
        button.addEventListener("click", function(e){
            let x, y;
            if((e.originalEvent || e).isTrusted){
                x = e.offsetX;
                y = e.offsetY;
            } else {
                x = e.target.clientWidth / 2;
                y = e.target.clientHeight / 2;
            }

            let html = "<span class='ripple' style='left:" + x + "px;top:" + y + "px;'></span>";

            button.insertAdjacentHTML("beforeend", html);
        
            setTimeout(function(){
                button.querySelector(".ripple").remove();
            }, 1000);
        });
    }

</script>

<body>
    <!-- *************************************************** Buttons *************************************************** -->
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button-gradient bg-lightblue ripple-button">Lightblue</button>
        <button class="button-gradient bg-red ripple-button">Red</button>
        <button class="button-gradient bg-green ripple-button">Green</button>
        <button class="button-gradient bg-blue ripple-button">Blue</button>
        <button class="button-gradient bg-yellow ripple-button">Yellow</button>
        <button class="button-gradient bg-black ripple-button">Black</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="icon-button ib-red"><span class=icon-text>Icon button</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-yellow"><span class=icon-text>Ib Yellow</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-blue sm"><span class=icon-text>Ib Blue sm</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-lightblue"><span class=icon-text>Ib Lightblue</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-black"><span class=icon-text>Ib Black</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="button ripple-button">Ripple</button>
        <button class="button ripple-hollow-button">Hollow</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button ripple-button b-orange">Button</button>
        <button class="button ripple-button b-red">Button</button>
        <button class="button ripple-button b-purple">Button</button>
        <button class="button ripple-button b-gray">Button</button>
    </div>

    <!-- *************************************************** Inputs *************************************************** -->
    <div id=inputs>
        <label class="input-placeholder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-color">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-noborder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>
    </div>

    <style>
        :root{
            --input-font-size: 18px;
            --input-focus-color: crimson;
        }
        .input-placeholder{
            position:relative;
            border:2px solid black;
            border-radius:4px;
            display: inline-block;
            transition: all 0.25s;
        }
        .input-placeholder span{
            position: absolute;
            font-size: var(--input-font-size);
            top:0;
            left:0;
            margin: calc(var(--input-font-size) / 2.5) calc(var(--input-font-size) / 2.5 - 2px);
            padding:0 2px;
            transition: all 0.25s;
            pointer-events: none;
        }
        .input-placeholder input{
            all:unset;
            cursor:text;
            padding: calc(var(--input-font-size) / 2.5);
            font-size: var(--input-font-size);
            display: block;
            transition: all 0.25s;
        }
        .input-placeholder input::placeholder{
            opacity:0;
        }
        .input-placeholder:focus-within span, .input-placeholder input:not(:placeholder-shown) + span{
            font-size: calc(var(--input-font-size) - 2px);
            top:-55%;
            background:white;
        }
    
        .input-placeholder-color:focus-within{
            border:2px solid var(--input-focus-color);
        }
        .input-placeholder-color:focus-within span{
            color: var(--input-focus-color);
        }
    
        .input-placeholder-noborder{
            border-radius:0;
            border:none;
            border-bottom: 2px solid black;
        }
        .input-placeholder-noborder input, .input-placeholder-noborder span{
            margin-left:0;
            padding-left:0;
        }
        .input-placeholder-noborder:focus-within span, .input-placeholder-noborder input:not(:placeholder-shown) + span{
            opacity:0.5;
        }
    </style>

    <!-- *************************************************** Checkboxes *************************************************** -->
    <div>
        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>
    </div>

    <!-- *************************************************** Radio-line *************************************************** -->
    <div>
        <div id=radios>
            <label>
                <input class=radio type=radio name=myradio>
                <span>First</span>
            </label>
            <label>
                <input class=radio type=radio name=myradio>
                <span>Second</span>
            </label>
            <label>
                <input class=radio type=radio name=myradio>
                <span>Third</span>
            </label>
            <div class=radio-line></div>
        </div>
    </div>

    <style>
        :root{
            --line-color: crimson;
        }
        .radio{
            padding:4px;
            position: relative;
            display: inline-block;
            text-align: center;
            display: none;
        }
        .radio input:checked + span:after{
            transition-delay: 0s;
            left:0;
            width:100%;
        }
        #radios{
            position: relative;
            display: inline-block;
        }
        #radios label{
            cursor:pointer;
            padding:5px;
            margin:10px;
        }
        .radio-line{
            position: absolute;
            width:100%;
            height:2px;
            background: var(--line-color);
            left:0;
            top:115%;
            width:0;
        }
    </style>

    <script>
        myRadio(document.querySelector("#radios"));

        function myRadio(wrapper, shiftTime = 250){
            let timeout;
            let line = wrapper.querySelector(".radio-line");
            line.style.transition = shiftTime + "ms";

            // Must be mousedown to get :checked element before its changed
            wrapper.addEventListener("mousedown", function(e){
                let clickedEl = e.target.closest("label");

                if(clickedEl){
                    let thisWidth = clickedEl.offsetWidth;
                    let thisLeft = clickedEl.offsetLeft;
                    
                    if(line.style.width == "0" || line.style.width == ""){
                        // First click
                        line.style.left = thisLeft;
                        line.style.width = thisWidth + "px";
                    } else {
                        let lastIndex = Array.from(wrapper.children).indexOf(wrapper.querySelector(":checked").parentNode);
                        let newIndex = Array.from(wrapper.children).indexOf(clickedEl);

                        if(newIndex == lastIndex)
                            return;

                        clearTimeout(timeout);
                        
                        if(newIndex > lastIndex){
                            // Left to right

                            let fullWidth = clickedEl.offsetLeft - line.offsetLeft + clickedEl.offsetWidth;
                            
                            line.style.left = line.offsetLeft + "px";
                            line.style.right = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.left = clickedEl.offsetLeft + "px"
                            }, shiftTime);
                        } else {
                            // Right to left

                            let lineOffsetRight = line.offsetLeft + line.offsetWidth
                            let rightPos = clickedEl.parentNode.offsetWidth - lineOffsetRight;
                            let fullWidth = lineOffsetRight - clickedEl.offsetLeft;

                            line.style.right = (rightPos) + "px";
                            line.style.left = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.right = (clickedEl.parentNode.offsetWidth - (clickedEl.offsetLeft + clickedEl.offsetWidth)) + "px"
                            }, shiftTime);
                        }
                    }
                }
            });
        }
    </script>

    <!-- *************************************************** Fill button *************************************************** -->
    <div>
        <div class=fill-button>text</div>
    </div>

    <style>
        /* .fill-button{
            position: relative;
            padding:0.75rem 1rem;
            text-align:center;
            background:black;
            overflow:hidden;
            border: 1px solid #d3d8db; 
            box-shadow: 0 1px 1px rgba(0,0,0,.05); 
            cursor:pointer;
        }
        .fill-button span{
            background:white;
            transition: width 0.7s, padding-top 0.7s;
            width: 0;
            padding-top:0;
            position: absolute;
            border-radius:100%;
            transform: translate(-50%, -50%);
            z-index: 0;
        }
        .fill-button text{
            color:white;
            position: relative;
            z-index: 1;
            transition: color 0.7s;
        }
        .fill-button:hover span{
            width:calc(105% * 2);
            padding-top:calc(105% * 2);
        }
        .fill-button:hover text{
            color:black;
        } */
    </style>
    <script>
        // _fillButtons(document.querySelectorAll(".fill-button"));

        // function _fillButtons(buttons){
        //     buttons.forEach(button => {
        //         let fill = button.querySelector("span");

        //         button.addEventListener("mouseover", function(e){
        //             fill.style.left = e.pageX - button.offsetLeft + "px";
        //             fill.style.top = e.pageY - button.offsetTop + "px";
        //         });
        //         button.addEventListener("mouseout", function(e){
        //             fill.style.left = e.pageX - button.offsetLeft + "px";
        //             fill.style.top = e.pageY - button.offsetTop + "px";
        //         });
        //     });
        // }

        fillButtons(document.querySelectorAll(".fill-button"));

        function fillButtons(buttons){
            buttons.forEach(button => {
                button.innerHTML = "<span></span><text>" + button.textContent + "</text>";
                let fill = button.querySelector("span");

                button.addEventListener("mouseover", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
                button.addEventListener("mouseout", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
            });

            const style = `<style>.fill-button{ position: relative; padding:0.75rem 1rem; text-align:center; background:black; overflow:hidden; border: 1px solid #d3d8db; box-shadow: 0 1px 1px rgba(0,0,0,.05); cursor:pointer;} .fill-button span{ background:white; transition: width 0.7s, padding-top 0.7s; width: 0; padding-top:0; position: absolute; border-radius:100%; transform: translate(-50%, -50%); z-index: 0; } .fill-button text{ color:white; position: relative; z-index: 1; transition: color 0.7s; } .fill-button:hover span{ width:calc(105% * 2); padding-top:calc(105% * 2); } .fill-button:hover text{ color:black; }</style>`;

            document.querySelector("html").insertAdjacentHTML("beforeend", style);
        }
    </script>

    <!-- *************************************************** Strike shift *************************************************** -->
    <div>
        <div class="strike-container" style="margin-bottom:0;">
            <ul style="list-style-type:none;padding:0;margin:0;">
                <li><span>Home</span></li>
                <li><span>About us</span></li>
                <li><span>Contact</span></li>
            </ul>
        </div>

        <style>
            .strike-container li{
                display:inline-block;
            }
            .strike-container span {
                padding: 0 20px;
                position: relative;
                display: inline-block;
                cursor: pointer;
            }
            .strike-container span:before {
                content: '';
                position: absolute;
                width: 0%;
                height: 2px;
                top: 50%;
                margin-top: -0.5px;
                background: #000;
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
                right: -5px;
            }
            .strike-container span:hover:before {
                left: -5px;
                width: calc(100% + 10px);
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
            }
        </style>
    </div>

    <!-- *************************************************** Tooltips *************************************************** -->
    <div id=tooltip-wrapper>
        <div id=tooltip class=tooltips>Tooltip something</div>
        <div id=tooltip1 class=tooltips>Tooltip 1 something</div>
        <div id=tooltip2 class=tooltips>Tooltip 2 something</div>
    </div>

    <style>
        .tooltips{
            transform: scale(0.7);
            opacity:0;
            transition: transform 325ms, opacity 325ms; 
            transition-timing-function: cubic-bezier(.54,1.5,.38,1.11);
            text-align: center;
            border:1px solid rgba(0,0,0,0.15);
            padding:8px;
            border-radius: 10px;
        }
        .tooltips:hover{
            opacity:1;
            transform: scale(1) translateY(-10px);
        }
        #tooltip1{
            transition-timing-function: cubic-bezier(0.375, 0.785, 0.32, 1.175);
        }
        #tooltip2{
            transition-timing-function: cubic-bezier(.38,.33,.37,1.67);
        }
    </style>

    <!-- *************************************************** Info clip-path *************************************************** -->
    <div id=info-wrapper>
        <div id=info>
            <span class=ico>i</span>
            <div class=text>
                Sone info text<br>...and more
            </div>
        </div>
    </div>

    <style>
        #info{
            padding:2.5rem 2rem;
            clip-path: circle(5% at 96% 14%);
            transition: all ease-in-out .3s;
            max-width: 500px;
            background: black;
            position: relative;
            border-radius:20px;
        }
        #info .ico{
            color:white;
            position:absolute;
            top:0px;
            right:1.2rem;
            font-weight: bold;
            font-size:1.5rem;
            transition: all ease-in-out .3s;
        }
        #info .text{
            color:white;
            background: transparent;
        }
        #info:hover, #info:focus{
            clip-path: circle(75%);
            outline:none;
        }
        #info:hover .ico, #info:focus .ico{
            opacity:0;
        }
    </style>

    <!-- *************************************************** Hover outside buttons *************************************************** -->
    <div id=hover-close>
        <div class=added-text>
            <div class=text>Some texttttttt<br>...and more</div>
            <div class=close-wrapper>
                <span class=ico>X</span>
            </div>
        </div>
    </div>

    <style>
        .added-text{
            position: relative;
            border: 2px solid black;
            box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.23);
            transition: box-shadow 0.2s;
            display: inline-block;
            transform-origin: top left;
            /* backface-visibility: hidden;
            -webkit-backface-visibility: hidden; */
            -webkit-transform: translateZ(0) scale(1.0, 1.0);
            transform: translateZ(0);
        }
        .added-text .text{
            outline:none;
            position: relative;
            background-color:rgba(255,255,255,0.85);
            padding:1rem 1rem;
            white-space: pre-line;
            z-index:1000;
        }
        .added-text:focus-within{
            box-shadow: 0 0 12px #000000;
        }
        .added-text .ico{
            position: absolute;
            top:25%;
            right:25%;
            border-radius: 50%;
            border:none;
            cursor: pointer;
            transition: all 0.25s;
            color:black;
            opacity:0;
        }
        .added-text:hover .close-wrapper, .added-text:focus-within .close-wrapper{
            width: 10rem;
            height: 10rem;
        }
        .added-text:hover .ico, .added-text:focus-within .ico{
            opacity: 1;
        }
        .close-wrapper{
            border:1px solid red;
            position: absolute;
            width:0;
            height:0;
            top:0;
            right:0;
            z-index:999;
            transition: 0.25s cubic-bezier(0.25, 0, 0, 1);
            transform: translate(50%, -50%) translateZ(0);
            /* backface-visibility: hidden;
            -webkit-backface-visibility: hidden; */
        }
    </style>

    <!-- *************************************************** Movable cube + canvas *************************************************** -->
    <div id=drop-wrapper>
        <div id=movable draggable=true></div>
    </div>


    <div id=canvas-wrapper>
        <canvas id=canvas style="border:2px dashed DeepSkyBlue"></canvas>
     </div>
 
     <div>
         <img id=reflect-canvas>
     </div>
    
    <script>        
        // Text
        $("#loading").on("click", function(e){
            if(e.target.classList.contains("editable"))
                return;
            let x = e.offsetX;
            let y = e.offsetY;
            console.log(y);
            $("<div class='editable b' contenteditable=true></div>").appendTo("#loading").css({backgroundColor:"rgba(255,255,255,0.666)", minWidth:"75px", padding:"0.5rem 1rem", width:"px",height:"px",border: "1px solid orange", position:"absolute", top:y+"px", left:x+"px"}).focus();
        });

        // Canvas
        const canvas = document.getElementById("canvas");
        
        canvas.width = $(canvas.parentNode).width() - 4;        // - border
        canvas.height = 440;
        let coord = { x: 0, y: 0 };
        var ctx = canvas.getContext("2d");

        $(window).on("mousedown", start);
        $(window).on("mouseup", stop);

        function start(e){
            $(window).on("mousemove", draw);
            coord.x = e.offsetX;
            coord.y = e.offsetY;
        }
        function stop(e){
            $(window).off("mousemove");
        }

        function draw(e){
            if(e.target.nodeName.toLowerCase() != "canvas"){
                $(window).off("mousemove");
                return;
            }

            ctx.beginPath();
            ctx.lineWidth = 5;
            ctx.lineCap = "round";
            ctx.strokeStyle = "red";
            ctx.moveTo(coord.x, coord.y);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            coord.x = e.offsetX;
            coord.y = e.offsetY;
            
            $("#reflect-canvas").attr("src", document.getElementById("canvas").toDataURL());
        }

    </script>

    <script>
        var differenceX, differenceY;        // Position of mouseX/Y in object

        $("#drop-wrapper").each(function(index){
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(function(event){
                $(this).on(event, preventDefaults);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).addClass("highlight");});
            });
 
            ['dragleave', 'drop'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).removeClass("highlight")});
            });

            $(this).on("drop", function(e){
                let dropX, dropY;

                if(e.target.id == "movable"){
                    // Dropping object in itself has different offsetX/Y
                    dropX = e.target.offsetLeft + e.offsetX;
                    dropY = e.target.offsetTop + e.offsetY;
                } else {
                    dropX = e.offsetX;
                    dropY = e.offsetY;
                }

                let newX = dropX - differenceX;
                let newY = dropY - differenceY;
                $("#movable").css({top: newY, left: newX});
            });
        });
        
        $("#movable").on("dragstart", function(e){
            differenceX = e.offsetX;
            differenceY = e.offsetY;
            e.target.style.filter = "grayscale(0.8)";
        });
        
        $("#movable").on("dragend", function(e){
            e.target.style.filter = "grayscale(0)";
        });

        function preventDefaults(e){
            e.preventDefault();
            e.stopPropagation();
        }
    </script>

    <script>
        $(function(){
            // Modal
            // Show only once per session
            if(true || sessionStorage["modalshown"])
                return;

            // Css
            $("body").append(`<style>#z-modal-full{ top:0; left:0; position: fixed; height:100%; width:100%; display:flex; justify-content: center; align-items: center; background:rgba(0,0,0,0.5); cursor:pointer; } #z-wrapper{ padding:20px; background:white; cursor:default; height:auto; box-shadow: 0px 0px 30px 0px rgb(2 2 2); border-radius:5px; } #z-wrapper { max-width:80%; } #z-wrapper img{ width:100%; } @media (max-width: 850px) { #z-wrapper { max-width:95%; } }</style>`);
            
            // Modal html
            $("<div id=z-modal-full><div id=z-wrapper><img src='https://image.freepik.com/free-photo/galaxy-system-millions-billions-stars-together-with-gas-dust_39386-369.jpg'></div></div>").hide().appendTo("body").fadeIn();
            
            $("#z-modal-full").on("click", function(e){
                if(e.target.id == "z-modal-full"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
            $(window).on("keydown", function(e){
                console.log(e);
                if(e.key == "Escape"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
        });
    </script>

    <style>
        #z-modal-full{
            top:0;
            left:0;
            position: fixed;
            height:100%;
            width:100%;
            display:flex;
            justify-content: center;
            align-items: center;
            background:rgba(0,0,0,0.5);
            cursor:pointer;
        }
        #z-wrapper{
            padding:20px;
            background:white;
            cursor:default;
            height:auto;
            box-shadow: 0px 0px 30px 0px rgb(2 2 2);
            border-radius:5px;
        }
        #z-wrapper {
            max-width:80%;
        }

        #z-wrapper img{
            width:100%;
        }
        #canvas{
            cursor:crosshair;
            width:100%;
        }
        @media (max-width: 850px) {
            #z-wrapper {
                max-width:95%;
            } 
        }
    </style>
