<title>TryIt Editor</title>
<link rel=icon href="https://cdn.discordapp.com/emojis/474325997181730826.png?v=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<link href="_buttons.css" rel="stylesheet">

<style>
    body{
        line-height: 1.6;
        color: #4f4f4f;
        margin:60px auto;
        max-width:1100px;
        font-size:22px;
        background:rgba(0,0,0,0.05);
        font-family: "Roboto", sans-serif;
        font-family: 'Comic Sans MS', 'Comic Sans' !important;
    }
    body > div{
        padding:2rem;
        border-radius:0.5rem;
        border: 1px solid #d3d8db;
        box-shadow: 0 1px 1px rgba(0,0,0,.1);
        background:white;
        margin-bottom:18px;
    }

    label{
        font-size: 16px;
        min-width: 0;
    }
    #inputs{
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 8px;
    }
    #inputs > *{
        flex: 1 0 30%;
    }
    .material-icons-outlined{
        font-size:32px;
    }
    .flex{
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>

<script>
    window.addEventListener("load", function(){
        rippleButtons(document.querySelectorAll(".ripple-button, .ripple-hollow-button"));
    });

    function rippleButtons(buttons){
        buttons.forEach(button => {
            button.addEventListener("click", function(e){
                let x, y;
                if((e.originalEvent || e).isTrusted){
                    x = e.offsetX;
                    y = e.offsetY;
                } else {
                    x = e.target.clientWidth / 2;
                    y = e.target.clientHeight / 2;
                }
    
                let html = "<span class='ripple' style='left:" + x + "px;top:" + y + "px;'></span>";
    
                button.insertAdjacentHTML("beforeend", html);
            
                setTimeout(function(){
                    button.querySelector(".ripple").remove();
                }, 1000);
            });
        });

        const style = ` <style> .ripple-button .ripple{position: absolute; border-radius: 50%; background-color: white; width: calc(100% / 4); padding-top: calc(100% / 4); margin-top: calc(100% / -8); margin-left: calc(100% / -8); animation: ripple 0.7s; animation-fill-mode: forwards; pointer-events: none; touch-action: none; opacity: 0.7;} @keyframes ripple {from { opacity: 0.7; transform: scale(1); } to { opacity: 0; transform: scale(10); }}
                                .ripple-hollow-button .ripple{position: absolute; background-image: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0px, rgba(255, 255, 255, 0.4) 30%, rgba(255, 255, 255, 0.6) 45%, rgba(255, 255, 255, 0.75) 60%, transparent 75%); border-radius: 50%; width: calc(100% / 4); padding-top: calc(100% / 4); margin-top: calc(100% / -8); margin-left: calc(100% / -8); z-index: 999; animation: ripple-hollow 0.7s; animation-fill-mode: forwards; pointer-events: none; touch-action: none;} @keyframes ripple-hollow{from { opacity: 1; transform: scale(1); } to { opacity: 0.25; transform: scale(8); }} </style>`;
        document.querySelector("html").insertAdjacentHTML("beforeend", style);
    }



</script>

<body style="background: #fff;" bgcolor=chucknorris>
    <div id=o style="position: relative; padding:0">
        <div id=i style="transition: 0.7s;font-size:44px;width:60px;text-align: center;">11</div>
        <div id=j style="transition: 0.7s;font-size:44px;position:absolute;opacity:0;left:0;top:0;width:60px;text-align: center;">22</div>
    </div>

    <script>
        let q = false;

        document.querySelector("#o").addEventListener("click", function(){
            if(q == false){
                q = true;
                document.querySelector("#i").style.opacity = 0;
                document.querySelector("#j").style.opacity = 1;
            } else {
                q = false;
                document.querySelector("#i").style.opacity = 1;
                document.querySelector("#j").style.opacity = 0;
            }
        });
    </script>


    <!-- *************************************************** Db *************************************************** -->
    <div style="display:flex; justify-content: space-around;">
        <button id=db-add class="button-gradient bg-lightblue ripple-button">Test</button>
        <div id=db-result>_</div>
        <button id=db-add-time class="button-gradient bg-yellow ripple-button">Add</button>
        <div id=db-time-result>_</div>
        <button id=db-show-time class="button-gradient bg-red ripple-button">Show</button>
    </div>

    <script>
        // *************************************************** GotoTop ***************************************************
        setTimeout(
            (function setGotop(){
                const buttonSelector = "#gotop";
                const compareToSelector = "#inputs";

                const thisStyle = `<style>${buttonSelector}{ position: fixed; bottom:5%; padding:0; right:3%; border-radius: 50%; opacity: 0.7; background: white; cursor:pointer; border:1px solid rgba(0,0,0,0.2); box-shadow: 0 1px 2px 0 rgb(60 64 67 / 30%), 0 2px 6px 2px rgb(60 64 67 / 15%); z-index:999999999; width:3rem; height:3rem; display: inline-flex; justify-content: center; align-items: center; transition: 0.3s; } ${buttonSelector}:hover{ opacity: 1; } ${buttonSelector}.hidden{ opacity: 0; pointer-events: none; }</style>`;
                const thisHtml = `<div id=gotop class="hidden">
                                    <svg height="24px" viewBox="0 0 24 24" width="24px" fill="#414141"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/></svg></div>
                                </div>`;
                document.querySelector("html").insertAdjacentHTML("beforeend", thisHtml + thisStyle);

                if(!("IntersectionObserver" in window))
                    return;
                    
                let topButton = document.querySelector(buttonSelector);
                let nav = document.querySelector(compareToSelector);

                topButton.addEventListener("click", function(){
                    window.scrollTo({top: 0, left: 0, behavior: "smooth"});
                });

                let options = {root: null, rootMargin: window.innerHeight + "px", threshold: 1};

                let observer = new IntersectionObserver(function(entries){
                    if(entries[0].isIntersecting){
                        topButton.classList.add("hidden");                
                    } else {
                        topButton.classList.remove("hidden");
                    }
                }, options);

                observer.observe(nav);
            }), 
        1111);

        // *************************************************** indexedDB ***************************************************
        // https://javascript.info/indexeddb
        // indexedDB.deleteDatabase("store");
        // Gets deleted by cookie deletion
        try {
            let openRequest = indexedDB.open("store", 8);

            openRequest.onupgradeneeded = function() {
                console.log("onUpdageEnded");

                let db = openRequest.result;

                if(!db.objectStoreNames.contains('books')){                                     // if there's no "books" store
                    db.createObjectStore('books', {keyPath: 'id', autoIncrement: true});        // create it
                }

                let books = this.transaction.objectStore("books");
                let index = books.createIndex('price_idx', 'price');
            }

            openRequest.onerror = function() {
                console.warn("onError", openRequest.error);
            };

            openRequest.onsuccess = function() {
                console.log("onSuccess");
                let db = openRequest.result;

                // db.createObjectStore("books", {keyPath: "id", autoIncrement: true});
            };

            openRequest.onblocked = function() {
                console.log("onBlocked");
                // this event shouldn't trigger if we handle onversionchange correctly

                // it means that there's another open connection to the same database
                // and it wasn't closed after db.onversionchange triggered for it
            };

            document.querySelector("#db-add").addEventListener("click", function(){
                let db = openRequest.result;

                let transaction = db.transaction("books", "readwrite");
                let books = transaction.objectStore("books");

                let book = {price: 11, created: new Date()};
                let book2 = {price: 11, created: new Date()};

                let request = books.add(book);
                let request2 = books.add(book2);

                let priceIndex = books.index("price_idx");
                // let request3 = books.get(2);
                let request3 = books.getAll(IDBKeyRange.only(2));
                let request4 = priceIndex.getAll(IDBKeyRange.upperBound(20));
                // console.log(mybook);

                request.onsuccess = function() { 
                    console.log("onSuccess Book added to the store", this.result);
                };
                request.onerror = function() {
                    console.log("onError", this.error);
                };

                request2.onsuccess = function() { 
                    console.log("onSuccess Book added to the store", this.result);
                };
                request2.onerror = function() {
                    console.log("onError", this.error);
                };

                request3.onsuccess = function() { 
                    console.log("search 3 result:");
                    console.log(this.result);
                };
                request3.onerror = function() {
                    console.log("search 3 error: ", this.error);
                };

                request4.onsuccess = function() { 
                    console.log("search 4 result:");
                    console.log(this.result);
                };
                request4.onerror = function() {
                    console.log("search 4 error: ", this.error);
                };

                // Short syntax
                db.transaction("books").objectStore("books").get(4).onsuccess = function(event) {
                    console.log(event);
                    console.log(this.result);
                    console.log("Id 4 result price:  " + event.target.result.price);

                    let data = this.result;
                    data.price += 100;

                    let objectStore = db.transaction("books", "readwrite").objectStore("books");
                    let requestUpdate = objectStore.put(data);
                };
            });

            document.querySelector("#db-show-time").addEventListener("click", function(){
                let db = openRequest.result;
                let colors = db.transaction("colors", "readwrite").objectStore("colors");

                colors.getAll().onsuccess = function(){
                    console.warn("getAll:");
                    console.log(this.result);
                }
            });

            async function setCount(type){
                let db = _openRequest.result;
                let transaction = db.transaction("colors", "readwrite");
                let colors = transaction.objectStore("colors");

                let typeIndex = colors.index("type");

                typeIndex.getAll(IDBKeyRange.only(type)).onsuccess = function(){
                    console.log(this.result.length);
                    
                    let target = document.querySelector("#target");
                    target.textContent = this.result.length;
                };
            }

            function getCount(type){
                let db = _openRequest.result;
                let transaction = db.transaction("colors", "readwrite");
                let colors = transaction.objectStore("colors");

                let typeIndex = colors.index("type");
                
                return new Promise(resolve => {
                    typeIndex.getAll(IDBKeyRange.only(type)).onsuccess = function(){
                        resolve(this.result.length);
                        console.log("success");
                    };
                })
            }

            // *************************************************** Inks ***************************************************
            
            // replace - inkss, inks, types
            
            let mydata = {
                darkred: ['2021-12-02 08:46:40', '2021-12-02 08:49:40', '2021-12-02 09:40:40', '2021-12-02 09:48:40'],
                lightblue: ['2021-12-03 08:06:40', '2021-12-03 08:46:40']
            };

            var realData = {};
            var _openRequest = indexedDB.open("types", 2);

            function init(){
                _openRequest.onupgradeneeded = function() {
                    let db = this.result;

                    if (!db.objectStoreNames.contains("inkss")) {
                        db.createObjectStore("inkss", {keyPath: 'id', autoIncrement: true});
                    
                        this.transaction.objectStore("inkss").createIndex('type', 'type');
                        this.transaction.objectStore("inkss").createIndex('created', 'created');
                    }
                }

                _openRequest.onerror = function() {
                    console.warn("onError", this.error);
                };

                _openRequest.onsuccess = function() {
                    console.log("INIT");

                    let db = this.result;
                    let inkss = db.transaction("inkss", "readwrite").objectStore("inkss");

                if(!false)
                    for(const property in mydata){
                        let type = property;
                        let dates = mydata[property];

                        for(let i = 0; i < dates.length; i++){
                            let inks = {type: type, created: dates[i]};

                            inkss.add(inks);
                        }
                        
                        // inkss.add(col).onsuccess = function() { 
                        //     console.log("onSuccess col added to the store", this.result);
                        // };
                    }

                    inkss.getAll().onsuccess = function(){
                        // console.warn("getAll:");
                        // console.log(this.result);

                        let data = this.result;

                        let uniqueCounts = {};
                        data.forEach(record => {
                            if(uniqueCounts.hasOwnProperty(record.type)){
                                ++uniqueCounts[record.type];
                            } else {
                                uniqueCounts[record.type] = 1;
                                realData[record.type] = [];
                            }

                            realData[record.type].push(record.created);
                        });

                        // console.log(uniqueCounts);
                        // console.log(realData);

                        // Do stuff on init
                    }
                };
            }

            function addD(type){
                let now = new Date().toLocaleString("sv").slice(0,3);

                let db = _openRequest.result;
                let inkss = db.transaction("inkss", "readwrite").objectStore("inkss");

                let col = {type: type, created: now};
                inkss.add(col);

                if(!realData.hasOwnProperty(type)){
                    realData[type] = [];
                }

                realData[type].push(now);
            }

            document.querySelector("#db-add-time").addEventListener("click", function(){
                addD(this.textContent);
            });

            init();
        } catch(e){}
        // https://gist.github.com/inexorabletash/704e9688f99ac12dd336         - Data selection
    </script>

    <!-- *************************************************** Buttons *************************************************** -->
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button-gradient bg-lightblue ripple-button">Lightblue</button>
        <button class="button-gradient bg-red ripple-button">Red</button>
        <button class="button-gradient bg-green ripple-button">Green</button>
        <button class="button-gradient bg-blue ripple-button">Blue</button>
        <button class="button-gradient bg-yellow ripple-button">Yellow</button>
        <button class="button-gradient bg-black ripple-button">Black</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="icon-button ib-red"><span class=icon-text>Ib Red</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-yellow"><span class=icon-text>Ib Yellow</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-blue sm"><span class=icon-text>Ib Blue sm</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-lightblue"><span class=icon-text>Ib Lblue</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="icon-button ib-black"><span class=icon-text>Ib Black</span><span class="material-icons-outlined icon-icon">shuffle</span></button>
        <button class="button ripple-button">Ripple</button>
        <button class="button ripple-hollow-button">Hollow</button>
    </div>
    <div style="display:flex; justify-content:space-between;position: relative;">
        <button class="button ripple-button b-orange">Button</button>
        <button class="button ripple-button b-red">Button</button>
        <button class="button ripple-button b-red include-icon-button">Button</button>
        <button class="button ripple-button b-purple">Button</button>
        <button class="button ripple-button b-gray">Button</button>
    </div>

    <!-- *************************************************** Yesterday *************************************************** -->
    <script>
        let but = $(".include-icon-button");
        but.on("click", function(e){
            if(e.offsetX > but[0].offsetWidth){
                // :after click
                let yesterday = new Date(Date.now() - 86_400_000); 
                console.log(yesterday);
            } else {
                // button click

            }
        });
    </script>

    <style>
        .include-icon-button{
            position: relative;
            overflow: visible;
        }
        .include-icon-button:after{
            content: "";
            position: absolute;
            height: 48px;
            width:48px;
            left:110%;
            top:0;
            border:1px solid rgba(0,0,0,0.15);
            border-radius: 50%;

            background-position: center;
            background-repeat: no-repeat;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' height='32px' viewBox='0 0 24 24' width='32px' fill='rgb(33,33,33)'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z'/></svg>");
        }
    </style>

    <!-- *************************************************** Inputs *************************************************** -->
    <!-- Placeholder must be defined (as anything) -->
    <div id=inputs>
        <label class="input-placeholder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-color">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <label class="input-placeholder input-placeholder-noborder">
            <input placeholder="Placeholder">
            <span>Placeholder</span>
        </label>

        <input class=myinput>
    </div>

    <style>
        .input-placeholder{
            --input-font-size: 18px;
            --input-focus-color: crimson;
            --padding-coefficient: 2;                /* Higher value = smaller padding */
            
            position:relative;
            border:2px solid black;
            border-radius:4px;
            display: inline-block;
            transition: all 0.25s;
        }
        .input-placeholder span{
            position: absolute;
            font-size: var(--input-font-size);
            top:0;
            left:0;
            margin: calc(var(--input-font-size) / var(--padding-coefficient)) calc(var(--input-font-size) / var(--padding-coefficient) - 2px);
            padding:0 2px;
            transition: all 0.25s;
            pointer-events: none;
        }
        .input-placeholder input{
            all:unset;
            cursor:text;
            padding: calc(var(--input-font-size) / var(--padding-coefficient));
            font-size: var(--input-font-size);
            display: block;
            transition: all 0.25s;
            width: 100%;
            box-sizing: border-box;
        }
        .input-placeholder input::placeholder{
            opacity:0;
        }
        .input-placeholder:focus-within span, .input-placeholder input:not(:placeholder-shown) + span{
            font-size: calc(var(--input-font-size) - 2px);
            top:-56%;
            background:white;
        }
        .input-placeholder-color:focus-within{
            border:2px solid var(--input-focus-color);
        }
        .input-placeholder-color:focus-within span{
            color: var(--input-focus-color);
        }
        /* Noborder input */
        .input-placeholder-noborder{
            border-radius:0;
            border:none;
            border-bottom: 2px solid black;
        }
        .input-placeholder-noborder input, .input-placeholder-noborder span{
            margin-left:0;
            padding-left:0;
        }
        .input-placeholder-noborder:focus-within span, .input-placeholder-noborder input:not(:placeholder-shown) + span{
            opacity:0.5;
            top:-58%;
        }
        .input-placeholder-noborder input{
            max-width: 100%;
        }

        .myinput {
            font-size: 1rem;
            padding-left: 7px;
            height: 40px;
            box-sizing: border-box;
            background-color: #f5f8f9;
            border: 1px solid #c7d6db;
            color: #555;
        }
        .myinput::placeholder {
            color: rgba(0, 0, 0, 0.4);
        }
        .myinput:focus {
            outline: 0;
            border-color: #2dccba;
            box-shadow: 0 0 2px 1px rgba(45, 204, 186, 0.5);
        }
    </style>

    <!-- *************************************************** Inputs validation *************************************************** -->
    <div>
        <label class="input-validated error">
            <input placeholder="Placeholder">
            <span class=input-error>
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                <span class=input-error-text>Your answer cannot have more than two repeating characters.</span>
            </span>
        </label>

        <label class="input-validated">
            <input placeholder="Placeholder">
            <span class=input-error>
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                <span class=input-error-text></span>    
            </span>
        </label>
    </div>

    <style>
        .input-validated{
            --input-validate-size: 16px;
            --input-error-color: crimson;
            --input-validate-maxwidth: 260px;

            position: relative;
            transition: all 0.25s;
            display: inline-flex;
            flex-direction: column;
            border-radius: 2px;
            max-width: var(--input-validate-maxwidth);
        }
        .input-validated input{
            border-radius: 4px !important;
            border: 2px solid black !important;
            all: unset;
            cursor: text;
            padding: calc(var(--input-validate-size) / 2);
            font-size: var(--input-validate-size);
            display: block;
            transition: all 0.25s;
            width: 100%;
            box-sizing: border-box;
        }

        .input-validated .input-error{
            display:none;
            position: relative;
            overflow: hidden;
            gap: calc(var(--input-validate-size) / 2);
            padding: calc(var(--input-validate-size) / 2);
            padding-right: var(--input-validate-size);
            font-size: var(--input-validate-size);
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            color: #555;
            background-image: linear-gradient(135deg, #ffdbdb 25%, #ffffff 25%, #ffffff 50%, #ffdbdb 50%, #ffdbdb 75%, #ffffff 75%, #ffffff 100%);
            background-size: 5.66px 5.66px;
        }
        .input-validated .input-error svg{
            margin-top:3px;
            width: calc(var(--input-validate-size) * 1.5);
            min-width: calc(var(--input-validate-size) * 1.5);
            height: calc(var(--input-validate-size) * 1.5);
            fill: var(--input-error-color);
        }
        .input-validated .input-error:before{
            content: "";
            width: calc(var(--input-validate-size) * 0.75);
            height: calc(var(--input-validate-size) * 0.75);
            transform: rotate(45deg);
            position: absolute;
            left: calc((var(--input-validate-size) * 1.75) / 2);             /* 1.75 is relative to svg width */
            top: calc(-1 * (var(--input-validate-size) / 1.75));
            background-color: var(--input-error-color);
        }

        .input-validated.error .input-error{
            display: inline-flex;
        }
        .input-validated.error input{
            border: 2px solid var(--input-error-color) !important;
        }
    </style>

    <!-- *************************************************** Alerts *************************************************** -->
    <div>
        <div class="error-alert alert">
            <div class="error-alert-text alert-text">
                <div class="error-alert-heading alert-heading">Error:</div>
                <div class="alert-info">something</div>
            </div>
            <div class="error-alert-ico alert-ico">
                <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM19 14.9L14.9 19H9.1L5 14.9V9.1L9.1 5h5.8L19 9.1v5.8z"/><circle cx="12" cy="16" r="1"/><path d="M11 7h2v7h-2z"/></svg>
            </div>
        </div>
        <br>
        <div class="error-alert alert alert-secondary">
            <div class="error-alert-ico alert-ico">
                <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM19 14.9L14.9 19H9.1L5 14.9V9.1L9.1 5h5.8L19 9.1v5.8z"/><circle cx="12" cy="16" r="1"/><path d="M11 7h2v7h-2z"/></svg>
            </div>
            <div class="error-alert-text alert-text">
                <div class="error-alert-heading alert-heading">Error:</div>
                <div class="alert-info">something</div>
            </div>
        </div>

        <br>

        <div class="success-alert alert">
            <div class="success-alert-text alert-text">
                <div class="success-alert-heading alert-heading">Error:</div>
                <div class="alert-info">something</div>
            </div>
            <div class="success-alert-ico alert-ico">
                <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM19 14.9L14.9 19H9.1L5 14.9V9.1L9.1 5h5.8L19 9.1v5.8z"/><circle cx="12" cy="16" r="1"/><path d="M11 7h2v7h-2z"/></svg>
            </div>
        </div>
        <br>
        <div class="success-alert alert alert-secondary">
            <div class="success-alert-ico alert-ico">
                <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM19 14.9L14.9 19H9.1L5 14.9V9.1L9.1 5h5.8L19 9.1v5.8z"/><circle cx="12" cy="16" r="1"/><path d="M11 7h2v7h-2z"/></svg>
            </div>
            <div class="success-alert-text alert-text">
                <div class="success-alert-heading alert-heading">Error:</div>
                <div class="alert-info">something</div>
            </div>
        </div>
    </div>

    <style>
        .alert{
            --error-alert-color: rgb(220, 20, 60);
            --error-alert-color-light: linear-gradient(0deg, rgba(255,192,203,1) 0%, rgba(255,223,229,1) 100%);
            --success-alert-color: rgb(7, 131, 11);
            --success-alert-color-light: linear-gradient(0deg, rgba(144,238,144,1) 0%, rgba(208,255,208,1) 100%);
            /* --success-alert-color-light: linear-gradient(0deg, rgb(133, 233, 133) 0%, rgba(201,255,201,1) 100%); */
            
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            padding: 10px 20px;
            border-radius: 14px;
        }
        .alert div{
            display: inline-block;
        }
        .alert-heading{
            font-weight: bold;
        }
        .alert-ico{
            width: 32px;
        }
        .alert-secondary{
            justify-content: left;
        }
        .alert-secondary .alert-text{
            padding-left: 10px;
            margin-left: 9px;
        }

        .error-alert-ico{
            fill: var(--error-alert-color);
        }
        .error-alert{
            border:2px solid var(--error-alert-color);
            background: var(--error-alert-color-light);
        }
        .error-alert-text{
            color: var(--error-alert-color);
        }
        .alert-secondary .error-alert-text{
            border-left: 1px solid rgba(220, 20, 60, 0.35);
            padding-left: 10px;
            margin-left: 9px;
        }
        .success-alert-ico{
            fill: var(--success-alert-color);
        }
        .success-alert{
            border:2px solid var(--success-alert-color);
            background: var(--success-alert-color-light);
        }
        .success-alert-text{
            color: var(--success-alert-color);
        }
        .alert-secondary .success-alert-text{
            border-left: 1px solid rgba(7, 131, 11, 0.35);
            padding-left: 10px;
            margin-left: 9px;
        }
    </style>

    <!-- *************************************************** Icons clicking *************************************************** -->
    <div id=icons class=flex style="background-color: black;">
        <i class="material-icons-outlined testico" tabindex="1">mood</i>
        <i class="material-icons-outlined testico" tabindex="1">hot_tub</i>
        <i class="material-icons-outlined testico" tabindex="1">bathtub</i>
        <i class="material-icons-outlined testico" tabindex="1">cruelty_free</i>
    </div>

    <style>
        .testico{
            color:#767676;
            margin: 10px;
            position: relative;
            transition: .8s;
            cursor: pointer;
        }
        .testico:before{
            content: '';
            background-color: white;
            border-radius: 50%;
            display: block;
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            transform: scale(0.001, 0.001);
        }
        .testico:focus:before{
            animation: outside-ripple .5s ease-out;
        }
        @keyframes outside-ripple{
            50%{
                transform: scale(1.75, 1.75);
            }
            90% {
                transform: scale(2.5, 2.5);
                opacity: 0;
            }
            99% {
                transform: scale(0.001, 0.001);
                opacity: 0;
            }
            100% {
                transform: scale(0.001, 0.001);
                opacity: 1;
            }
        }
    </style>

    <!-- *************************************************** Checkboxes *************************************************** -->
    <div>
        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class=custom-checkbox-wrapper>
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>

        <label class=custom-checkbox-label>
            <input id=showtime class=custom-checkbox type="checkbox">
            <span class="custom-checkbox-wrapper checkbox-green">
                <span class=background></span>
                <svg></svg>
            </span>
            Zobrazit cas
        </label>
    </div>

    <!-- *************************************************** Radio-line + Arrow hover *************************************************** -->
    <div>
        <!-- Should be same line to prevent whitespaces -->
        <div id=radios>
            <label><input class=radio type=radio name=myradio><span>First</span></label>
            <label><input class=radio type=radio name=myradio><span>Second</span></label>
            <label><input class=radio type=radio name=myradio><span>Third</span></label>
            <div class=radio-line></div>
        </div>

        <div id=link-hover-arrow>
            <a href=#>
                First link
                <span class=ico>
                    <svg viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                </span>
            </a>
            <a href=#>
                Second link
                <span class=ico>
                    <svg viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                </span>
            </a>
        </div>
    </div>

    <style>
        .radio-line{
            --line-color: crimson;

            position: absolute;
            width:100%;
            height:2px;
            background: var(--line-color);
            left:0;
            top:115%;
            width:0;
        }
        .radio{
            padding:4px;
            position: relative;
            display: inline-block;
            text-align: center;
            display: none;
        }
        .radio input:checked + span:after{
            transition-delay: 0s;
            left:0;
            width:100%;
        }
        #radios{
            position: relative;
            display: inline-block;
        }
        #radios label{
            cursor:pointer;
            padding:5px;
            margin:10px;
        } 

        #link-hover-arrow{
            display: inline-flex;
        }
        #link-hover-arrow a{
            transition: 0.3s;
            color: #000;
            text-decoration: none;
        }
        #link-hover-arrow a:hover{
            color: crimson;
        }
        #link-hover-arrow a:hover svg{
            opacity: 1;
            fill:crimson;
            transform: translateX(0px);
            transition: color 0.3s, opacity 0.6s, transform 0.35s;
        }
        #link-hover-arrow a svg{
            opacity: 0;
            vertical-align: middle;
            width: 22px;
            transform: translateX(-20px);
            transition: color 0.3s, opacity 0.25s, transform 0.35s;
        }
    </style>

    <script>
        myRadio(document.querySelector("#radios"), 1);

        function myRadio(wrapper, startIndex = -1, shiftTime = 250){
            let timeout;
            let line = wrapper.querySelector(".radio-line");
            line.style.transition = shiftTime + "ms";

            // Must be mousedown to get :checked element before its changed
            wrapper.addEventListener("mousedown", function(e){
                let clickedEl = e.target.closest("label");

                if(clickedEl){
                    if(line.style.width == "0" || line.style.width == ""){
                        // First click
                        let thisWidth = clickedEl.offsetWidth;
                        let thisLeft = clickedEl.offsetLeft;

                        line.style.left = thisLeft + "px";
                        line.style.width = thisWidth + "px";
                    } else {
                        let lastIndex = Array.from(wrapper.children).indexOf(wrapper.querySelector(":checked").parentNode);
                        let newIndex = Array.from(wrapper.children).indexOf(clickedEl);

                        if(newIndex == lastIndex)
                            return;

                        clearTimeout(timeout);

                        if(newIndex > lastIndex){
                            // Left to right
                            let fullWidth = clickedEl.offsetLeft - line.offsetLeft + clickedEl.offsetWidth;

                            line.style.left = line.offsetLeft + "px";
                            line.style.right = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.left = clickedEl.offsetLeft + "px"
                            }, shiftTime);
                        } else {
                            // Right to left
                            let lineOffsetRight = line.offsetLeft + line.offsetWidth
                            let rightPos = clickedEl.parentNode.offsetWidth - lineOffsetRight;
                            let fullWidth = lineOffsetRight - clickedEl.offsetLeft;

                            line.style.right = (rightPos) + "px";
                            line.style.left = "auto";
                            line.style.width = fullWidth + "px";

                            timeout = setTimeout(function(){
                                line.style.width = clickedEl.offsetWidth + "px";
                                line.style.right = (clickedEl.parentNode.offsetWidth - (clickedEl.offsetLeft + clickedEl.offsetWidth)) + "px"
                            }, shiftTime);
                        }
                    }
                }
            });

            // Start on position if startIndex defined
            if(startIndex > -1){
                window.addEventListener("load", function(){
                    let e = new Event("mousedown", {bubbles: true});
                    let el = wrapper.querySelector("label:nth-of-type(" + (startIndex + 1) + ")");

                    el.dispatchEvent(e);
                    el.querySelector("input").checked = true;
                });
            }
        }
    </script>

    <!-- *************************************************** Fill button *************************************************** -->
    <div>
        <div class=fill-button>text</div>
    </div>

    <style>
        .fill-button{
            position: relative;
            padding:0.75rem 1rem;
            text-align:center;
            background:black;
            overflow:hidden;
            border: 1px solid #d3d8db; 
            box-shadow: 0 1px 1px rgba(0,0,0,.05); 
            cursor:pointer;
        }
        .fill-button span{
            background:white;
            transition: width 0.7s, padding-top 0.7s;
            width: 0;
            padding-top:0;
            position: absolute;
            border-radius:100%;
            transform: translate(-50%, -50%);
            z-index: 0;
        }
        .fill-button text{
            color:white;
            position: relative;
            z-index: 1;
            transition: color 0.7s;
        }
        .fill-button:hover span{
            width:calc(105% * 2);
            padding-top:calc(105% * 2);
        }
        .fill-button:hover text{
            color:black;
        }
    </style>
    <script>
        fillButtons(document.querySelectorAll(".fill-button"));

        function fillButtons(buttons){
            buttons.forEach(button => {
                button.innerHTML = "<span></span><text>" + button.textContent + "</text>";
                let fill = button.querySelector("span");

                button.addEventListener("mouseover", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
                button.addEventListener("mouseout", function(e){
                    fill.style.left = e.pageX - button.offsetLeft + "px";
                    fill.style.top = e.pageY - button.offsetTop + "px";
                });
            });
        }
    </script>

    <!-- *************************************************** Strike shift *************************************************** -->
    <div>
        <div class="strike-container" style="margin-bottom:0;">
            <ul style="list-style-type:none;padding:0;margin:0;display:inline;">
                <li><span>Home</span></li>
                <li><span>About us</span></li>
                <li><span>Contact</span></li>
            </ul>
            <svg id=mysvg viewBox="0 0 541.6 571.11"> <path style="fill:black" d="M535.441,412.339A280.868,280.868 0 1,1 536.186,161.733L284.493,286.29Z"/> </svg>
        </div>

        <style>
            #mysvg{
                width:20px;
                height:20px;
            }

            .strike-container li{
                display:inline-block;
            }
            .strike-container span {
                padding: 0 20px;
                position: relative;
                display: inline-block;
                cursor: pointer;
            }
            .strike-container span:before {
                content: '';
                position: absolute;
                width: 0%;
                height: 2px;
                top: 50%;
                margin-top: -0.5px;
                background: #000;
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
                right: -5px;
            }
            .strike-container span:hover:before {
                left: -5px;
                width: calc(100% + 10px);
                transition: width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
            }
        </style>
    </div>

    <!-- *************************************************** Tooltips *************************************************** -->
    <div id=tooltip-wrapper>
        <div id=tooltip class=tooltips>Tooltip something</div>
        <div id=tooltip1 class=tooltips>Tooltip 1 something</div>
        <div id=tooltip2 class=tooltips>Tooltip 2 something</div>
    </div>

    <style>
        .tooltips{
            transform: scale(0.7);
            opacity:0;
            transition: transform 325ms, opacity 325ms; 
            transition-timing-function: cubic-bezier(.54,1.5,.38,1.11);
            text-align: center;
            border:1px solid rgba(0,0,0,0.15);
            padding:8px;
            border-radius: 10px;
        }
        .tooltips:hover{
            opacity:1;
            transform: scale(1) translateY(-10px);
        }
        #tooltip1{
            transition-timing-function: cubic-bezier(0.375, 0.785, 0.32, 1.175);
            border: 1px solid rgba(0,0,0,0.2);
            box-shadow: 0px 1px 2px 0px rgb(60 64 67 / 30%), 0px 2px 6px 2px rgb(60 64 67 / 15%);
        }
        #tooltip2{
            transition-timing-function: cubic-bezier(.38,.33,.37,1.67);
        }

        [class*=hint--]:after {
            font-family: 'Comic Sans MS', 'Comic Sans' !important;
            padding: 10px 14px;
        }
    </style>

    <!-- *************************************************** https://github.com/chinchang/hint.css *************************************************** -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css" rel="stylesheet">
    <div id=tooltip-lib-wrapper style="display:flex; justify-content:space-between;">
        <div class="hint--top-right" aria-label="hint--top-right">Tooltip something</div>
        <div class="hint--top-right hint--rounded" aria-label="hint--top-right hint--rounded">Tooltip something</div>
        <div class="hint--top-right hint--rounded hint--no-animate" aria-label="hint--top-right hint--rounded hint--no-animate">Tooltip something</div>
        <div class="hint--top-left hint--rounded hint--bounce" aria-label="hint--top-left hint--rounded hint--bounce">Tooltip something</div>
        <div class="hint--top-right hint--always hint--rounded" aria-label="hint--top-right hint--always hint--rounded">Tooltip something</div>
        <div class="hint--bottom hint--always hint--error" aria-label="hint--bottom hint--error hint--rounded">Tooltip something</div>
        <div class="hint--bottom-left hint--rounded hint-no-arrow" aria-label="hint--bottom-left hint--rounded hint-no-arrow">Tooltip something</div>
    </div>

    <!-- *************************************************** icons *************************************************** -->
    <!-- <style>

    </style>

    <div>
        <ul id=glowing>
            <li>
                <i class="material-icons-outlined">mood</i>
            </li>
            <li>
                <i class="material-icons-outlined">hot_tub</i>
            </li>
            <li>
                <i class="material-icons-outlined">bathtub</i>
            </li>
        </ul>
    </div> -->

    <!-- *************************************************** Animated svg *************************************************** -->
    <!-- pathLength=1 must be set, otherwise base stroke-dashoffset & stroke-dasharray on path.getTotalLength(); -->
    <style>
        #svg{
            width:50px;
            color:crimson;
            cursor:pointer;
        }
        #svg path{
            transition: all 0.8s;
            stroke-dashoffset: 0;
            stroke-dasharray: 1;
        }
    </style>

    <div style="display: flex; justify-content:space-around;">
        <svg id=svg viewBox="0 2 24 24" aria-hidden="true" focusable="false"><path pathLength=1 fill="none" stroke="currentColor" stroke-width="3" d="M1.73 12.91l6.37 6.37L22.79 4.59"/></svg>
        
        <div class="trapdoor" style="position:relative;">
            <div class="top door"></div>
            <div class="bottom door"></div>
            <div class="door-inside">Hi</div>
        </div>
    </div>

    <script>
        document.querySelector("#svg").addEventListener("click", function(){
            let path = this.querySelector("path");

            // strokeDashoffset = how much of svg is removed, 1 = 100%
            path.style.strokeDashoffset = Number(!Number(path.style.strokeDashoffset));
        });
    </script>
    
    <!-- *************************************************** Trapdoor *************************************************** -->
    <style>
        .trapdoor {
            --door-font-size: 30px;

            transform: translateZ(0px);
            -webkit-font-smoothing: antialiased;
            width: 200px;
            height: 50px;
            box-shadow: inset -7px 0px 12px -8px rgba(0, 0, 0, 0.3), inset 7px 0px 12px -8px rgba(0, 0, 0, 0.3);
            background: rgba(0, 0, 0, 0.25);
            transition: background 400ms ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .door-inside{
            font-size: var(--door-font-size);
        }
        .trapdoor:hover {
            background: #fff;
        }
        .trapdoor:hover .door {
            box-shadow: 0px 0px 10px -2px rgba(0, 0, 0, 0.4);
            transform: scale(1.08);
        }
        .trapdoor:hover .top {
            top: -50%;
        }
        .trapdoor:hover .bottom {
            top: 100%;
        }
        .top {
            top: 0%;
            left: 0px;
        }
        .top:before {
            top: -5px;
            top: calc(-1 * var(--door-font-size) + 27px);
        }
        .bottom {
            top: 50%;
            left: 0px;
        }
        .bottom:before {
            top: -30px;
            top: calc(-1 * var(--door-font-size) + 2px);
        }
        .door {
            transition: top 400ms, box-shadow 200ms, transform 300ms;
            transition-timing-function: ease-in-out;
            background-color: #fff;
            position: absolute;
            overflow: hidden;
            width: 100%;
            z-index: 2;
            height: 50%;
        }
        .door:before {
            position: absolute;
            font-size: var(--door-font-size);
            display: block;
            color: #3e5875;
            content: "Door";
            width: 100%;
            height: 20px;
            text-align:center;
        }
    </style>

    <!-- *************************************************** Info clip-path, Counter *************************************************** -->
    <div style="display:flex; justify-content:space-between;">
        <div id=info>
            <span class=ico>i</span>
            <div class=text>
                Some info text<br>...and more
            </div>
        </div>

        <div style="display:flex; justify-content:center; align-items:center; flex:1;">
            <div class="counter">
                <span class="arrow arrow-top"><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"/></svg></span>
                <span class=count>1</span>
                <span class="arrow arrow-bottom"><svg viewBox="0 0 24 24"><path d="M24 24H0V0h24v24z" fill="none" opacity=".87"/><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"/></svg></span>
            </div>
        </div>
    </div>

    <style>
        #info{
            padding:2.5rem 2rem;
            clip-path: circle(5% at 96% 14%);
            transition: all ease-in-out .3s;
            max-width: 500px;
            background: black;
            position: relative;
            border-radius:20px;
            flex:1;
            min-width: 550px;
            box-sizing: border-box;
        }
        #info .ico{
            color:white;
            position:absolute;
            top:0px;
            right:1.2rem;
            font-weight: bold;
            font-size:1.5rem;
            transition: all ease-in-out .3s;
        }
        #info .text{
            color:white;
            background: transparent;
        }
        #info:hover, #info:focus{
            clip-path: circle(75%);
            outline:none;
        }
        #info:hover .ico, #info:focus .ico{
            opacity:0;
        }

        .counter{
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border:2px solid crimson;
            user-select: none;
            font-weight: bold;
            vertical-align:center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size:14px;
            cursor: pointer;
            transition: background 0.2s;
            background: rgba(0,0,0,0.0);
        }
        .counter:hover{
            background: rgba(220, 20, 60, 0.075);
        }
        .counter:focus{
            box-shadow: 0 0 6px 2px rgb(0 0 0 / 75%);
            background: rgba(0,0,0,0.1);
            outline:none;
        }
        .counter .arrow{
            position: absolute;
            line-height: 1px;
            width:48px;
            height: 0px;
            text-align: center;
            opacity: 0;
            z-index:1;
            transition: 0.25s;
        }
        .counter svg{
            width:24px;
            fill: rgba(0,0,0,0.4);
            transition: 0.2s;
        }
        .counter .arrow-top{
            bottom: calc(70% + 24px);
        }
        .counter .arrow-bottom{
            top:calc(70% + 1px);
        }
        .counter:hover .arrow{
            height: 24px;
            opacity: 1;
        }
        .counter:hover .arrow-top{
            bottom:100%;
        }
        .counter:hover .arrow-bottom{
            top:calc(100% + 1px);
        }
        .counter .arrow:hover svg{
            fill: rgba(0,0,0,0.8);
        }
    </style>

    <!-- *************************************************** Loadings *************************************************** -->
    <div style="display:flex; justify-content:space-between; align-items: center;">
        <div id="loading">
            <div class="circle one"></div>
            <div class="circle two"></div>
            <div class="circle three"></div>
        </div>

        <div class="clock-loader"></div>

        <div class="dot-loader">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </div>

    <style>
        /* *************************************************** First *************************************************** */
        #loading{
            width: 156px;
            height: 156px;
            position: relative;
        }  
        .circle{
            position: absolute;
            border: 3px solid transparent;
            border-top-color: #000;
            border-radius: 50%;
            animation: rotate linear infinite;
        }
        .circle.one{
            height: 50px;
            width: 50px;
            left: 50px;
            top: 50px;
            animation-duration: 0.85s;
        }
        .circle.two{
            height: 75px;
            width: 75px;
            top: 38px;
            left: 38px;
            animation-duration: 0.95s;
        }
        .circle.three{
            height: 100px;
            width: 100px;
            top: 25px;
            left: 25px;
            animation-duration: 1.05s;
        }
        @keyframes rotate{
            from {transform: rotateZ(360deg)}
            to {transform: rotateZ(0deg)}
        }

        /* *************************************************** Dots *************************************************** */
        .dot-loader {
            height: 15px;
            width: 105px;
            display: flex;
            position: relative;
        }
        .dot-loader .dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #000;
            animation: move 500ms linear 0ms infinite;
            margin-right: 30px;
            box-sizing: border-box;
        }
        .dot-loader .dot:first-child {
            position: absolute;
            top: 0;
            left: 0;
            animation: grow 500ms linear 0ms infinite;
        }
        .dot-loader .dot:last-child {
            position: absolute;
            top: 0;
            right: 0;
            margin-right: 0;
            animation: grow 500ms linear 0s infinite reverse;
        }
        @keyframes grow {
            from {
                transform: scale(0, 0);
                opacity: 0;
            }
            to {
                transform: scale(1, 1);
                opacity: 1;
            }
        }
        @keyframes move {
            from { transform: translateX(0px); }
            to { transform: translateX(45px); }
        }

        /* *************************************************** Clock *************************************************** */
        .clock-loader {
            --clock-color: #000;
            --clock-width: 4rem;
            --clock-radius: calc(var(--clock-width) / 2);
            --clock-minute-length: calc(var(--clock-width) * 0.4);
            --clock-hour-length: calc(var(--clock-width) * 0.2);
            --clock-thickness: 0.2rem;

            /* Rotate hides pixelated edges */
            transform: rotate(45deg);

            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: var(--clock-width);
            height: var(--clock-width);
            border: 2px solid var(--clock-color);
            border-radius: 50%;
        }
        .clock-loader::before, .clock-loader::after {
            content: "";
            position: absolute;
            top: calc(var(--clock-radius) * 0.25);
            width: var(--clock-thickness);
            background: var(--clock-color);
            border-radius: 10px;
            transform-origin: center calc(100% - calc(var(--clock-thickness) / 2));
            animation: spin infinite linear;
        }
        .clock-loader::before {
            height: var(--clock-minute-length);
            animation-duration: 2s;
        }
        .clock-loader::after {
            top: calc(var(--clock-radius) * 0.25 + var(--clock-hour-length));
            height: var(--clock-hour-length);
            animation-duration: 15s;
        }
        @keyframes spin {
            to { transform: rotate(1turn); }
        }
    </style>

    <!-- *************************************************** Sidemenu *************************************************** -->
    <div class="sidemenu-wrapper side-hidden">
        <div class=sidemenu-toggle>
            <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"/></svg>
        </div>
        <div class=sidemenu>
            Sidetext
        </div>
    </div>

    <style>
        .sidemenu-wrapper{
            --sidemenu-width: 40px;
            --sidemenu-max-height: 600px;
            --sidemenu-toggle-background: #AA1111;

            width:var(--sidemenu-width) !important;
            position: fixed;
            right:0;
            top:400px;
            min-height: 120px;
            max-height: var(--sidemenu-max-height);
            background-color: #fff;
            z-index:10;
            transition: 0.4s;
            box-sizing: border-box;
            box-shadow: 0 1px 1px rgb(0 0 0 / 10%);
            display: flex; 
            align-items: stretch;
            border-radius:0;
            padding:0;
            border-top-left-radius: 6px;
            border-bottom-left-radius: 6px;
            border:1px solid rgba(0, 0, 0, 0.25);
            border-right: 0;
        }
        .sidemenu{
            width: 100%;
            overflow: auto;
            padding:0.5rem 1rem;
            max-height: 100%;
            overflow-x: hidden;
            overflow-y: auto;
        }
        .sidemenu-wrapper.side-hidden{
            right:calc(var(--sidemenu-width) * -1);
            box-shadow: none;
        }
        .sidemenu-wrapper.side-hidden svg{
            margin-left: 0px !important;
            transform: rotate(180deg);

        }
        .sidemenu-toggle{
            position: absolute;
            background: var(--sidemenu-toggle-background);
            top:60px;
            right:100%;
            height: 28px;
            width: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom-left-radius: 5px;
            border-top-left-radius: 5px;
            cursor: pointer;
            border:1px solid black;
            border-right:0;
        }
        .sidemenu-toggle svg{
            margin-left: 1px;
            width:22px;
            min-width: 22px;
            fill:white;
            transition: transform 0.5s;
        }
    </style>

    <script>
        document.querySelector(".sidemenu-toggle").addEventListener("click", function(){
            let wrapper = this.closest(".sidemenu-wrapper");

            if(wrapper.classList.contains("side-hidden")){
                // Show
                wrapper.classList.remove("side-hidden");
            } else {
                // Hide
                wrapper.classList.add("side-hidden");
            }
        });
    </script>

    <!-- *************************************************** Login forms *************************************************** -->
    <style>
        .login-modal{
            opacity: 0;
            pointer-events: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            transition: opacity 0.5s;
            background: rgba(0, 0, 0, 0.53);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 99999999;
            border-radius: 0;
        }
        .show-login-modal{
            opacity: 1;
            pointer-events: all;
        }
        .show-login-modal .login-wrapper{
            transform: translateY(0);
            transition: transform .35s ease-out;
        }
        .login-wrapper{
            padding: 2rem;
            transform: translateY(-60px);
            transition: transform .5s ease-out;
            cursor: default;
            border:rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            color: #fff;
            min-width: 300px;
            box-shadow: 0px 6px 16px 0px rgb(0 0 0 / 20%);
            background: #fff;
        }
        .login-wrapper-under{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        /* *************************************************** Dark *************************************************** */
        #login-modal-dark{
            --width-modal-dark: 400px;
            --font-size-modal-dark: 30px;
            --input-padding-vertical-dark: 5px;
        }
        #login-modal-dark .login-wrapper{
            width: var(--width-modal-dark);
            background: #000;
            padding: 3rem 2rem;
        }
        #login-modal-dark .login-wrapper-under{
            gap:2.5rem;
        }
        #login-modal-dark label{
            text-align: center;
            display: inline-block;
            width: 100%;
            position: relative;
        }
        #login-modal-dark .modal-label-text{
            line-height: 1;
            left:50%;
            cursor: text;
            position: absolute;
            font-size: var(--font-size-modal-dark);
            color: #9B9B9B;
            transform: translate(-50%, calc( -1 * (2 * var(--input-padding-vertical-dark) + var(--font-size-modal-dark))));
            transition: all 0.35s;
            letter-spacing: 4px;
        }
        #login-modal-dark label:focus-within .modal-label-text, #login-modal-dark input:not(:placeholder-shown) + .modal-label-text{
            font-size: 18px;
            transform: translate(-50%, calc( -1 * (2 * var(--input-padding-vertical-dark) + var(--font-size-modal-dark) + 26px)));
            letter-spacing: 1px;
        }
        #login-modal-dark label:focus-within .modal-label-text{
            color:#fff;
        }
        #login-modal-dark input{
            background-color: transparent;
            border: 0;
            border-bottom: 2px solid #4A4A4A;
            color: white;
            font-size: var(--font-size-modal-dark);
            letter-spacing: -1px;
            outline: 0;
            padding: var(--input-padding-vertical-dark) 0;
            text-align: center;
            transition: all 0.35s;
            width: 220px;
        }
        #login-modal-dark input::placeholder{
            opacity: 0;
        }
        #login-modal-dark input:focus{
            max-width: 100%;
            width: 340px;
            box-sizing: border-box;
        }
        #login-modal-dark button{
            all:unset;
            border: 1px solid white;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            padding: 10px 28px;
            line-height: 1;
            min-width: 120px;
            text-align: center;
        }
        #login-modal-dark button:hover{
            background-color: #fff;
            color:#000;
        }
        #login-buttons{
            background: linear-gradient(to right, rgb(228 225 225), rgb(39, 64, 70));
        }
        #login-buttons > *{
            cursor: pointer;
        }
        #login-buttons > *:nth-child(3), #login-buttons > *:nth-child(4){
            color:#fff;
        }

        /* *************************************************** Simple *************************************************** */
        #login-modal-simple{
            --main-color-modal-simple: crimson;
            --wrapper-background-simple: #f6f8fa;
            --color-modal-simple: #333333;
            --width-modal-simple: 330px;
            --font-size-modal-simple: 16px;
        }
        #login-modal-simple .login-wrapper{
            background: var(--wrapper-background-simple);
            width: var(--width-modal-simple);
            box-sizing: border-box;
            padding: 1.25rem 2rem;
        }
        #login-modal-simple .login-wrapper-under *{
            width: 100%;
            box-sizing: border-box;
        }
        #login-modal-simple .modal-label-text{
            color: var(--color-modal-simple);
            margin-bottom:0.1rem;
            font-size: var(--font-size-modal-simple);
        }
        #login-modal-simple input, #login-modal-simple button{
            font-size: var(--font-size-modal-simple);
            padding: 8px;
            border-radius: 7px;
            box-sizing: content-box;
        }
        #login-modal-simple input{
            color: var(--color-modal-simple);
            outline: none;
            border:1px solid #d0d7de;
            background: #fff;
        }
        #login-modal-simple input:focus{
            border:1px solid var(--main-color-modal-simple);
            outline:1px solid var(--main-color-modal-simple);
        }
        #login-modal-simple-confirm{
            cursor: pointer;
            color:#fff;
            background: var(--main-color-modal-simple);
            border: 1px solid var(--main-color-modal-simple);
            transition: opacity 0.2s;
        }
        #login-modal-simple-confirm:hover{
            opacity: 0.75;
        }
        .pass-text-wrapper{
            display: flex;
            align-items: center;
        }
        .pass-text-wrapper .modal-label-text{
            flex-grow: 1;
        }
        #forgot-password{
            width: auto !important;
            white-space: nowrap;
            font-size: calc(var(--font-size-modal-simple) * 0.8);
        }
        #submit-button-wrapper-simple{
            margin-top: 1rem;
        }

        /* *************************************************** Classic *************************************************** */
        #login-modal-classic{
            --main-color-modal-classic: rgb(80, 163, 185);
            --color-modal-classic: #333333;
            --font-size-modal-classic: 16px;
            --flexgap-modal-classic: 1rem;
        }
        #login-modal-classic .login-wrapper{
            color: var(--color-modal-classic);
            font-size: var(--font-size-modal-classic);
        }
        #login-modal-classic .login-wrapper-under{
            gap: var(--flexgap-modal-classic);
        }
        #login-modal-classic .login-wrapper-under > *{
            text-align: center;
            width: 100%;
        }
        #login-modal-classic input{
            width:100%;
            padding:8px 10px;
            border-radius: 0 !important;
            border:1px solid rgba(0, 0, 0, 0.4);
        }
        #login-modal-classic input::placeholder{
            color: rgba(0, 0, 0, 0.4);
        }
        .login-social{
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .login-social-note{
            color: #777;
        }
        .login-heading{
            margin-bottom: calc(2rem - var(--flexgap-modal-classic));
            font-size:26px;
        }
        .login-social-icons{
            display: flex;
            justify-content: center;
            gap:10px;
        }
        .login-social-icons > span{
            cursor:pointer;
            width:32px;
            /* color: var(--color-modal-classic); */
            color: #555;
            transition: 0.2s;
        }
        .login-social-icons > span:hover{
            color: var(--main-color-modal-classic);
        }
        #forgot-password{
            float:right;
            margin-top:2px;
        }
        .login-register{
            margin-top: calc(20px - var(--flexgap-modal-classic));
            border-top: 1px solid rgba(0, 0, 0, 0.2);
            padding: 20px 0;
        }
        #submit-button-wrapper-classic{
            margin-top: -8px;
        }
        #login-modal-classic-confirm{
            cursor:pointer;
            color: #fff;
            background: var(--main-color-modal-classic);
            padding:8px 12px;
            width: 100%;
            border-radius: 10px;
            transition: opacity 0.2s;
            border: 1px solid var(--main-color-modal-classic);
        }
        #login-modal-classic-confirm:hover{
            opacity: 0.8;
        }

        /* *************************************************** Modern *************************************************** */
        #login-modal-modern{
            --main-color-modal-modern: linear-gradient(to right, #35c3c1, #00d6b7);
            --wrapper-background-modern: rgb(74, 77, 91);
            --color-modal-modern: #444;
            --font-size-modal-modern: 16px;
            --flexgap-modal-modern: 1.5rem;
            --input-padding-modern: 12px;
            --font-modal-modern: 'comic sans ms';
        }
        #login-modal-modern .login-wrapper{
            font-family: var(--font-modal-modern);
            color: var(--color-modal-modern);
            font-size: var(--font-size-modal-modern);
            border-radius: 0;
            background: var(--wrapper-background-modern);
        }
        #login-modal-modern .login-wrapper-under{
            gap: var(--flexgap-modal-modern);
        }
        #login-modal-modern .login-wrapper-under > *{
            text-align: center;
            width: 100%;
        }
        #login-modal-modern input{
            flex-grow: 1;
            border-radius: 0;
            border: 0;
            outline:none;
            box-sizing: content-box;
            color: var(--color-modal-modern);
            padding:var(--input-padding-modern) 12px;
            height: var(--font-size-modal-modern);
            font-size: var(--font-size-modal-modern);
            font-family: var(--font-modal-modern);
        }
        #login-modal-modern input:focus{
            background: rgba(0,0,0,0.05);
        }
        #login-modal-modern input::placeholder{
            color: rgba(0, 0, 0, 0.4);
        }
        #login-modal-modern label{
            background: #fff;
            display: flex;
        }
        .label-icon-modern{
            width: calc(2 * var(--input-padding-modern) + var(--font-size-modal-modern));
            height: calc(2 * var(--input-padding-modern) + var(--font-size-modal-modern));
            background: rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: text;
        }
        .label-icon-modern svg{
            fill: #aaa;
            width: 22px;
        }
        #forgot-password-modern{
            font-size: 13px;
            color: #35c3c1;
            display: inline-block;
            width: auto !important;
        }
        .login-register{
            margin-top: calc(20px - var(--flexgap-modal-modern));
            border-top: 1px solid rgba(0, 0, 0, 0.2);
            padding: 20px 0;
        }
        #login-modal-modern-confirm{
            cursor:pointer;
            color: #fff;
            width: 100%;
            border-radius: 0;
            transition: opacity 0.2s;
            box-sizing: content-box;
            background: var(--main-color-modal-modern);
            border: 1px solid var(--main-color-modal-modern);
            padding:var(--input-padding-modern) 0;
            line-height: var(--font-size-modal-modern);
            height: var(--font-size-modal-modern);
            font-size: var(--font-size-modal-modern);
            font-family: var(--font-modal-modern);
        }
        #login-modal-modern-confirm:hover{
            opacity: 0.8;
        }
    </style>

    <div id=login-buttons style="display:flex; justify-content:space-between;">
        <span class="material-icons-outlined"> sledding </span>
        <span class="material-icons-outlined"> explore_off </span>
        <span class="material-icons-outlined" style="transform: rotate(180deg);"> female </span>
        <span class="material-icons-outlined"> groups </span>
    </div>

    <div id=login-modal-dark class=login-modal>
        <div class=login-wrapper>
            <div class=login-wrapper-under>
                <div class=name-wrapper>
                    <label>
                        <input class="login-name" placeholder="_">
                        <div class=modal-label-text>Userame</div>
                    </label>
                </div>
                <div class=pass-wrapper>
                    <label>
                        <input class="login-pass" placeholder="_">
                        <div class=modal-label-text>Password</div>
                    </label>
                </div>
                <div class=submit-button-wrapper>
                    <button id=login-modal-dark-confirm>Ok</button>
                </div>
            </div>
        </div>
    </div>

    <div id=login-modal-simple class=login-modal>
        <div class=login-wrapper>
            <div class=login-wrapper-under>
                <div class=name-wrapper>
                    <label>
                        <div class=modal-label-text>Username</div>
                        <input class="login-name">
                    </label>
                </div>
                <div class=pass-wrapper>
                    <label>
                        <div class=pass-text-wrapper>
                            <div class=modal-label-text>Password</div>
                            <a id=forgot-password href=#>Forgot password?</a>
                        </div>
                        <input class="login-pass">
                    </label>
                </div>
                <div class=submit-button-wrapper-simple>
                    <button id=login-modal-simple-confirm>Ok</button>
                </div>
            </div>
        </div>
    </div>

    <div id=login-modal-classic class=login-modal>
        <div class=login-wrapper>
            <div class=login-wrapper-under>
                <div class=login-heading>Login</div>
                <div class=name-wrapper>
                    <input class="login-name" placeholder=Username>
                </div>
                <div class=pass-wrapper>
                    <input class="login-pass" placeholder=Password>
                    <a id=forgot-password href=#>Forgot password?</a>
                </div>
                <div class=submit-button-wrapper-classic>
                    <button id=login-modal-classic-confirm>Confirm</button>
                </div>
                <div class=login-social>
                    <div class=login-social-note>or use a social network</div>
                    <div class=login-social-icons>
                        <span class="material-icons-outlined">sports_kabaddi</span>
                        <span class="material-icons-outlined">catching_pokemon</span>
                        <span class="material-icons-outlined">sentiment_very_satisfied</span>
                    </div>
                </div>
                <div class=login-register>
                    Not a member yet? <a href=#>Sign up</a>.
                </div>
            </div>
        </div>
    </div>

    <div id=login-modal-modern class=login-modal>
        <div class=login-wrapper>
            <div class=login-wrapper-under>
                <div class=name-wrapper>
                    <label>
                        <div class=label-icon-modern>
                            <svg viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"/></svg>
                        </div>
                        <input class="login-name" placeholder=Username>
                    </label>
                </div>
                <div class=pass-wrapper>
                    <label>
                        <div class=label-icon-modern>
                            <svg viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path d="M0 0h24v24H0V0z" opacity=".87"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
                        </div>
                        <input class="login-pass" placeholder=Password>
                    </label>
                </div>
                <div class=submit-button-wrapper>
                    <button id=login-modal-modern-confirm>LOGIN</button>
                </div>
                <a id=forgot-password-modern href=#>Forgot password?</a>
            </div>
        </div>
    </div>

    <script>
        // Confirm on enter
        document.querySelectorAll(".login-name, .login-pass").forEach(function(input){
            input.addEventListener("keypress", (e) => {
                if(e.key == "Enter"){
                    input.closest(".login-wrapper").querySelector(".submit-button-wrapper button").click();
                }
            });
        });
        document.querySelectorAll(".login-modal").forEach(modal => {
            // Hide on background click
            modal.addEventListener("click", function(e){
                if(e.target.classList.contains("login-modal")){
                    e.target.classList.remove("show-login-modal");
                }
            });
            
            // Add focus on transition end
            modal.addEventListener("transitionend", function(e){
                if(e.propertyName == "opacity" && e.target.classList.contains("login-modal") && modal.classList.contains("show-login-modal")){
                    let input = modal.querySelector("input");
                    
                    if(input){
                        input.focus();
                    }
                }
            });
        });

        // Test
        $("#login-buttons > *").on("click", function(){
            let index = $(this).index();

            $(".login-modal").eq(index).addClass("show-login-modal");
        });
    </script>

    <!-- *************************************************** Multi select - jQuery *************************************************** -->
    <div>
        <div id=link-XX>
            <ul id=link-XX-items-wrapper>
                <li class=link-XX-item-input><input id=link-XX-input autocomplete=off spellcheck=false placeholder="Something"></li>
            </ul>
            <div id=XX-autocomplete-items></div>
        </div>
    </div>

    <script>
        // Validate mails split by , OR ;
        function validateMails(mail){
            let mails = mail.split(/;|,/);

            let atLeastOne = false;
            for(let i = 0; i < mails.length; i++){
                if(mails[i] && !mails[i].match(/.+@.+/)){
                    return false;
                } else {
                    if(mails[i]){
                        atLeastOne = true;
                    }
                }
            }

            if(atLeastOne){
                return true;
            } else {
                return false;
            }
        }

        jQuery.fn.extend({
            myFadeIn: function(time = 400){
                this.css({
                    transition: "opacity " + time + "ms ease-in, transform " + time/2 + "ms ease-out", 
                    overflow: "visible",
                    height: "auto",
                    padding: "",
                    margin: "",
                    // transition: "opacity " + time + "ms", 
                    pointerEvents: "all",
                    transform: "",
                    opacity:1
                });

                return this;
            },
            myFadeOut: function(time = 400){
                this.css({
                    transition: "opacity " + time + "ms ease-in, transform " + time/2 + "ms ease-out", 
                    overflow: "hidden",
                    height: 0,
                    padding:0,
                    margin:0,
                    // transition: "opacity " + time + "ms",
                    pointerEvents: "none",
                    transform: "scale(0.9)",
                    opacity:0
                });

                return this;
            }
        });

        myAutocomplete(true);
        function myAutocomplete(first = false){
            let $searchInput = $("#link-XX-input");
            let $wrapper = $("#XX-autocomplete-items");

            // $.ajax({
            //     method: "POST",
            //     url: "ajax/get-mails_ajax.php",
            //     success: function(data){
            //         let result = JSON.parse(data);

            //         if(result.total == 0)
            //             return;
                    
            //         result = result.data;

            //         // Reset
            //         $(".autocomplete-item").remove();
            //         $(".link-XX-item").remove();
            //         $searchInput.val("");
            //         $wrapper.myFadeOut(0);

            //         result = result.sort((a, b) => b.times_used - a.times_used);

            //         // Create dropdown
            //         for(let i = 0; i < result.length; i++){
            //             addAutocompleteItem(result[i].email, $wrapper);
            //         }
            //     },
            //     error: function(request, status, error){}
            // });

            $(".autocomplete-item").remove();
            $(".link-XX-item").remove();
            $searchInput.val("");
            $wrapper.myFadeOut(0);

            // *************************************************** Test ***************************************************
            let result = [{email:"SOMETHING"}, {email:"SOMEMAIL"}, {email:"SOMEOTHERMAIL"}, {email:"nomail"}];
            // Create dropdown
            for(let i = 0; i < result.length; i++){
                addAutocompleteItem(result[i].email, $wrapper);
            }

            if(first){
                $(window).on("click", function(e){
                    if(!e.target.closest("#link-XX") && e.target.className != "link-XX-item"){
                        $wrapper.myFadeOut(0);
                    }
                });

                $searchInput.on("focus", function(){
                    $wrapper.myFadeIn();
                });

                // Alter dropdown
                $searchInput.on("keyup focus", function(e){
                    if(e.key?.toLowerCase() == "enter")
                        return;

                    let search = $(this).val().trim();
                    let show = false;
                    
                    $(".autocomplete-item").each(function(){
                        let origText = $(this).data("text");

                        if(origText.toLowerCase().match(search.toLowerCase())){
                            let pos = origText.toLowerCase().indexOf(search.toLowerCase());

                            let newText = origText.slice(0, pos) + "<b>" + search + "</b>" + origText.slice(pos + search.length);

                            $(this).html(newText);
                            $(this).css({display: "block"});
                            show = true;
                        } else {
                            $(this).css({display: "none"});
                            $(this).html(origText);
                        }
                    });

                    if(!show){
                        $wrapper.myFadeOut(0);
                    } else {
                        if($wrapper.css("opacity") == 0)
                            $wrapper.myFadeIn();
                    }
                });

                // Create new mail box
                $searchInput.on("keyup", function(e){
                    if(e.key.toLowerCase() == "enter"){
                        let mail = $(this).val().trim();

                        if(mail){
                            let mails = mail.split(/;|,/);
                            mails.forEach(newMail => {
                                $(".autocomplete-item").each(function(){
                                    if($(this).text() == newMail){
                                        $(this).addClass("item-checked");
                                    }
                                });

                                createMyBox(newMail, true);               // Box created on enter
                            });
                        }
                    }
                });

                $("#link-XX-items-wrapper").on("click", function(e){
                    if(e.target.classList != "link-XX-item")
                        $searchInput.focus();
                });
            }
        }

        function addAutocompleteItem(mail, $wrapper, checked = false){
            let row = "<div class='autocomplete-item " + ((checked) ? "item-checked" : "") + "' data-text='" + mail + "' tabindex=-1>" + mail + "</div>";        // Tabindex to make it focusable

            $wrapper.append(row);

            $(".autocomplete-item:last-of-type").on("click", function(){
                let text = $(this).text();

                if(!$(this).hasClass("item-checked")){
                    createMyBox(text);                                    // Box created on item click
                    $(this).addClass("item-checked");
                } else {
                    $(this).removeClass("item-checked");
                    
                    $(".link-XX-item").each(function(){
                        if($(this).text() == text){
                            $(this).remove();
                        }
                    });
                }
            });
        }

        // After server responded
        function addAutocompleteItemsAfterConfirm(){
            let $wrapper = $("#XX-autocomplete-items");

            let inputMail = $("#link-XX-input").val().trim();
            if(inputMail){
                createMyBox(inputMail, true);                             // Box created on mail send
            }

            $(".link-XX-item.newest").each(function(){
                addAutocompleteItem($(this).text(), $wrapper, true);
            });
        }

        function myAutocompleteReset(){
            $(".link-XX-item").remove();
            $("#link-XX-input").val("");
            $(".item-checked").removeClass("item-checked");
        }

        function createMyBox(text, newest = false){
            let div = "<li class='link-XX-item " + ((newest) ? "newest" : "") + "'>" + text + "</li>";
            $(".link-XX-item-input").before(div);
            $("#link-XX-input").val("");
            let $addedDiv = $(".link-XX-item");
            $addedDiv = $addedDiv.eq($addedDiv.length - 1);

            $addedDiv.on("click", function(){
                let text = $(this).text();

                $(".autocomplete-item").each(function(){
                    if(text == $(this).data("text")){
                        $(this).removeClass("item-checked");
                    }
                });

                $(this).remove();
            });
        }
    </script>

    <style>
        #link-XX-input::-webkit-search-cancel-button {
            font-size: 1.2rem !important;
            transform: translateY(-1px);
            margin-right: 5px;
            cursor: pointer;
        }
        #create-link-options {
            padding: 0.75rem 0 0.5rem 0;
        }
        #user-select + div:before {
            content: "Uivatel";
        }
        #link-XX-input, #modal-XX {
            font-size: 1rem;
            padding-left: 7px;
            box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.15);
            border: 1px solid #b1b1b1;
            height: 40px;
            box-sizing: border-box;
            width: 100%;
        }
        #link-XX-input::placeholder, #modal-XX::placeholder {
            color: rgba(0, 0, 0, 0.4);
        }
        #link-XX-input:focus, #modal-XX:focus {
            outline: 1px solid black;
            border-radius: 4px;
        }
        #user-list {
            padding: 1rem 0;
        }
        .link-blank {
            cursor: alias;
        }
        #link-XX {
            font-size: 1rem;
            box-sizing: border-box;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            border: 1px solid #c7d6db;
        }
        #link-XX:before {
            content: "Poslat na:";
            position: absolute;
            top: -25px;
            color: #888888;
            font-weight: 600;
        }
        #link-XX:focus-within {
            border-color: #2dccba;
            box-shadow: 0 0 2px 1px rgba(45, 204, 186, 0.5);
        }
        #link-XX-items-wrapper {
            min-height: 46px;
            gap: 6px;
            list-style-type: none;
            padding: 7px 10px;
            margin: 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            cursor: text;
            box-sizing: border-box;
            background-color: #f5f8f9;
        }
        .link-XX-item, .link-XX-item-input {
            cursor: pointer;
            height: 100%;
            display: inline-block;
            padding: 5px;
            box-sizing: border-box;
            outline: 1px solid #2dccba;
            background-color: #e2fffc;
        }
        .link-XX-item:hover:after {
            color: #212529;
        }
        .link-XX-item:after {
            content: "\00d7";
            font-weight: bold;
            transition: 0.1s;
            padding-left: 6px;
            padding-right: 1px;
            line-height: 1;
            color: rgba(0, 0, 0, 0.3);
            font-size: 1.5rem;
            vertical-align: text-top;
        }
        .link-XX-item-input {
            padding: 0;
            flex-grow: 1;
            cursor: text;
            position: relative;
            outline: 0 !important;
            background-color: #f5f8f9;
        }
        #link-XX-input {
            all: unset;
            padding: 5px;
            border-radius: 0 !important;
            line-height: 26px;
            width: 100%;
            box-sizing: border-box;
        }
        #link-XX-input:focus {
            outline: 0 !important;
        }
        #XX-picked-items {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            box-sizing: border-box;
        }
        #XX-picked-items div {
            box-sizing: border-box;
            display: inline-block;
            cursor: pointer;
            border-radius: 5px;
            height: 28px;
            margin: 6px 5px 6px 0;
            padding: 4px 6px;
            color: white;
            background-color: #212529;
        }
        #XX-picked-items div:first-of-type {
            margin-left: 7px;
        }
        #XX-autocomplete-items {
            box-sizing: border-box;
            position: absolute;
            border: 1px solid #212529;
            border-top: none;
            z-index: 999;
            width: 100%;
            top: calc(100% + 1px);
            box-shadow: 0px 6px 16px 0px rgba(0, 0, 0, 0.2);
            max-height: 300px;
            overflow: auto !important;
            scrollbar-width: thin;
        }
        .autocomplete-item {
            box-sizing: border-box;
            width: 100%;
            padding: 7px;
            padding-left: 8px;
            cursor: pointer;
            background-color: #f6f6f6;
            border-bottom: 1px solid #d4d4d4;
            transition: background-color 0.1s;
        }
        .autocomplete-item:hover {
            background-color: #e9e9e9;
        }
        .autocomplete-item:before {
            content: "";
            display: inline-block;
            width: 18px;
            vertical-align: sub;
            margin-right: 5px;
            height: 18px;
            transition: 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.4);
        }
        .autocomplete-item.item-checked {
            background: #e2fffc !important;
            border-bottom: 1px solid #2dccba !important;
        }
        .autocomplete-item.item-checked:before {
            background-color: #2dccba;
            background-image: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -2 28 28" aria-hidden="true" focusable="false"><path fill="none" stroke="rgb(255, 255, 255)" stroke-width="3" d="M1.73 12.91l6.37 6.37L22.79 4.59"/></svg>');
        }
    </style>

    <!-- *************************************************** Hover outside buttons & hover-spread *************************************************** -->
    <div id=hover-close class=flex>
        <div class=added-text>
            <div class=text>Some texttttttt<br>...and more</div>
            <div class=close-wrapper>
                <span class=ico>X</span>
            </div>
        </div>

        <div class=hover-spread-wrapper style="margin-left:auto; margin-right:300px;">
            <div class=hover-spread>
                <div class="hover-spread-base hover-spread-base-text">Head</div>
                <div class=hover-spread-content>
                    <div>Content something</div>
                    <div class=info-text>content under</div>
                </div>
            </div>
        </div>
        <div class=hover-spread-wrapper style="margin-right:300px;">
            <div class=hover-spread>
                <div class="hover-spread-base hover-spread-base-ico"></div>
                <div class=hover-spread-content>
                    <div>Content something</div>
                    <div class=info-text>content under</div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .hover-spread-wrapper{
            --hover-spread-size: 100px;
            --hover-spread-padding: 14px;

            overflow: visible;
            width: var(--hover-spread-size);
            height: var(--hover-spread-size);
        }
        .hover-spread{
            width: var(--hover-spread-size);
            height: var(--hover-spread-size);
            position: relative;
            padding: var(--hover-spread-padding);
            transition: all 275ms cubic-bezier(0.8, 0, 0.2, 1);
            border:1px solid rgba(0, 0, 0, 0.25);
            overflow: hidden;
            box-sizing: border-box;
        }
        .hover-spread:hover{
            width: 320px;
        }
        .hover-spread:hover .hover-spread-content{
            animation: slideUp 0.4s forwards;
        }
        .hover-spread-base-text{
            color: crimson;
            text-align: center;
        }
        .hover-spread-content .info-text{
            color: #909DBA;
        }
        .hover-spread-base{
            width: calc(var(--hover-spread-size) - 2 * var(--hover-spread-padding));
            height: 100%;
        }
        .hover-spread-content{
            opacity: 0;
            line-height: 1.3;
            position: absolute;
            top: var(--hover-spread-padding);
            left: calc(var(--hover-spread-size));
        }
        .hover-spread-base-ico{
            width: calc(var(--hover-spread-size) - 2 * var(--hover-spread-padding));
            background: linear-gradient(to right, rgb(237, 33, 58), rgb(147, 41, 30));
        }
        @keyframes slideUp{
            0% {
                opacity: 0;
                -webkit-transform: translateY(10px);
                transform: translateY(10px);
            }
            50% {
                opacity: 0;
                -webkit-transform: translateY(10px);
                transform: translateY(10px);
            }
            100% {
                opacity: 1;
                -webkit-transform: translateY(0px);
                transform: translateY(0px);
            }
        }

        .added-text{
            position: relative;
            border: 2px solid black;
            box-shadow: 2px 2px 6px 2px rgba(0, 0, 0, 0.23);
            transition: box-shadow 0.2s;
            display: inline-block;
            transform-origin: top left;
            -webkit-transform: translateZ(0) scale(1.0, 1.0);
            transform: translateZ(0);
        }
        .added-text .text{
            outline:none;
            position: relative;
            background-color:rgba(255,255,255,0.85);
            padding:1rem 1rem;
            white-space: pre-line;
            z-index:1000;
            color: #909DBA;
        }
        .added-text:focus-within{
            box-shadow: 0 0 12px #000000;
        }
        .added-text .ico{
            position: absolute;
            top:25%;
            right:25%;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.25s;
            color:black;
            opacity:0;
        }
        .added-text:hover .close-wrapper, .added-text:focus-within .close-wrapper{
            width: 8rem;
            height: 8rem;
        }
        .added-text:hover .ico, .added-text:focus-within .ico{
            opacity: 1;
        }
        .close-wrapper{
            border:1px solid red;
            position: absolute;
            width:0;
            height:0;
            top:0;
            right:0;
            z-index:999;
            transition: 0.25s cubic-bezier(0.25, 0, 0, 1);
            transform: translate(50%, -50%) translateZ(0);
        }
    </style>

    <!-- *************************************************** Img gallery *************************************************** -->
    <div id=imgs>
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\1_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\2_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\3_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\4_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\5_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\6_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\7_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\8_768.png">
        <img src="pdf\4c4577d57cee1604f158b497a913b11e20304472364b2a9fcc332b99d54c\9_768.png">
    </div>

    <style>
        #imgs{
            display: flex;
            gap:16px;
        }
        #imgs > *{
            min-width: 0;
            cursor: pointer;
        }
        .gallery-modal-full *{
            border:1px solid crimson;
        }


        .gallery-modal-full{
            --header-height: 40px;

            padding:0;
            pointer-events: none;
            position: fixed;
            border-radius:0;
            left: 0;
            top: 0;
            right:0;
            bottom:0;
            height:100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background:rgba(0, 0, 0, 0.4);
            transition: opacity 0.33s;
            opacity: 0;
            z-index: 2147483647;
            cursor: pointer;
        }
        .gallery-modal-wrapper{
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
            margin:0.5rem 1rem;
            cursor:default;
        }
        .gallery-modal-full.show{
            opacity: 1;
            pointer-events: all;
        }
        .gallery-modal-images, .gallery-modal-images-inside{
            position: relative;
            /* overflow: hidden; */
        }
        .gallery-modal-images-inside{
            transition: 0.5s;
        }
        .gallery-modal-images img{
            position: absolute;
            top:0;
            left:0;
            max-height: calc(100vh - 1rem - (2 * var(--header-height)));
            max-width: calc(100vw - 2rem);
            cursor: pointer;
            transition: 0.5s;
            opacity: 0;
        }
        .gallery-modal-images img:nth-of-type(2){
            opacity: 1;
        }
        .gallery-modal-images .dummy{
            position: relative;
        }
        .gallery-modal-head, .gallery-modal-footer{
            color: #fff;
            display: inline-block;
            height:var(--header-height);
            display: flex;
            align-items: center;
        }
        .gallery-modal-head{
            gap: 5px;
        }
        .gallery-modal-footer svg{
            width: 30px;
            cursor: pointer;
            fill: white;
            animation-duration: 0.3s;
        }
        .gallery-modal-images img.slide{
            opacity: 1;
        }
        @keyframes chevronClick{
            0%      { transform: scale(1); }
            50%     { transform: scale(1.2); }
            100%    { transform: scale(1); }
        }
    </style>

    <script defer>
        gallery(document.querySelectorAll("#imgs > *"), {slide: true});

        function gallery(images, options = {}){
            // img.src.replaceAll(/.+\/|\..+/g, ""); // get name
            const slideSideBonusImageCount = 1;

            this.index = 0;
            this.modal = null;
            this.galleryImages = null;

            options.slide = options.slide || false;

            this.createHtml = function(){
                let html = `<div class=gallery-modal-full tabindex=0>
                                <div class=gallery-modal-wrapper>
                                    <div class=gallery-modal-head><span class=index>1</span><span>/</span><span class=length>${images.length}</span></div>
                                    <div class=gallery-modal-images>
                                        <div class="gallery-modal-images-inside">
                                            <img style="visibility:hidden; pointer-events:none" class="dummy" src='${images[0].src}'>`;

                if(options.slide){
                    for(let i = slideSideBonusImageCount; i > 0; i--){
                        html += "<img " + ((options.slide) ? "class=slide" : "") + " data-index='" + (images.length - (i)) + "' src='" + images[images.length - (i)].src + "'>";
                    }
                }

                images.forEach((img, index) => {
                    html += "<img " + ((options.slide) ? "class=slide" : "") + " data-index='" + index + "' src='" + img.src + "'>";
                });

                if(options.slide){
                    for(let i = 0; i < slideSideBonusImageCount; i++){
                        html += "<img " + ((options.slide) ? "class=slide" : "") + " data-index='" + (i) + "' src='" + images[i].src + "'>";
                    }
                }

                html +=            `    </div>
                                    </div>
                                    <div class=gallery-modal-footer>
                                        <svg class=move-chevron viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none" opacity=".87"/><path d="M17.51 3.87L15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"/></svg>
                                        <svg class=move-chevron viewBox="0 0 24 24"><g><path d="M0,0h24v24H0V0z" fill="none"/></g><g><polygon points="6.23,20.23 8,22 18,12 8,2 6.23,3.77 14.46,12"/></g></svg>
                                    </div>
                                </div>
                            </div>`;

                document.querySelector("body").insertAdjacentHTML("beforeend", html);
                this.modal = document.querySelector(".gallery-modal-full:last-of-type");
                this.galleryImages = modal.querySelectorAll(".gallery-modal-images img:not(.dummy)");

                if(options.slide){
                    // On load of last non-duplicate img
                    this.galleryImages[galleryImages.length - (slideSideBonusImageCount + 1)].addEventListener("load", () => {
                        let leftTotal = 0;
                        
                        for(let i = 0; i < slideSideBonusImageCount; i++){
                            leftTotal -= galleryImages[i].offsetWidth;
                        }

                        for(let i = 0; i < galleryImages.length; i++){

                            if(i != 0){
                                console.log(galleryImages[i - 1].offsetWidth);
                                leftTotal += galleryImages[i - 1].offsetWidth;
                            }

                            galleryImages[i].style.left = leftTotal + "px";
                        }
                    });
                }
            }
   
            this.setListeners = function(){
                this.modal.addEventListener("keydown", (e) => {
                    if(e.key == "Escape"){
                        modal.classList.remove("show");
                    }

                    if(e.key == "ArrowLeft" || e.key == "ArrowRight"){
                        let prevIndex = this.index;

                        if(e.key == "ArrowLeft"){
                            --this.index;
                        } else {
                            ++this.index;
                        }

                        this.moveImg(prevIndex);
                    }
                });

                images.forEach((img, i) => {
                    img.addEventListener("click", () => {
                        let prevIndex = this.index;

                        this.index = i;

                        this.moveImg(prevIndex, true);
                        modal.classList.add("show");
                        modal.focus();
                    });
                });

                // Chevrons
                this.modal.querySelectorAll(".move-chevron").forEach((chevron, i) => {
                    chevron.addEventListener("click", () => {
                        let prevIndex = this.index;

                        if(i == 0){
                            --this.index;
                        } else {
                            ++this.index;
                        }

                        this.moveImg(prevIndex);
                    });
                });

                this.modal.addEventListener("click", (e) => {
                    // Close modal on background click
                    if(e.target.classList.contains("gallery-modal-full") || e.target.classList.contains("gallery-modal-dismiss")){
                        modal.classList.remove("show");
                        return;
                    }

                    if(e.target.nodeName == "IMG"){
                        let img = e.target;
                        let prevIndex = this.index;

                        // Check if click was on left or right side
                        if(e.offsetX < e.target.offsetWidth / 2){
                            --this.index;
                        } else {
                            ++this.index;
                        }

                        this.moveImg(prevIndex);
                    }
                });
            }

            this.moveImg = function(prevIndex, preventAnimation = false){
                if(options.slide){
                    var slideIndex = this.index + slideSideBonusImageCount;

                    this.galleryImages[0].parentNode.style.left = (parseInt(this.galleryImages[slideIndex].style.left) * -1) + "px";

                    console.log("slideindex - " + slideIndex);
                } else {
                }

                if(this.index == images.length){
                    this.index = 0;
                }
                
                if(this.index < 0){
                    this.index = images.length - 1;
                }
                console.log("Real index - " + this.index);

                if(options.slide){
                    // Left transition
                    // Reset left pre-overflow
                    if(slideIndex == images.length + 1 || slideIndex == 0){
                        this.galleryImages[0].parentNode.addEventListener("transitionend", (e) => {
                            console.log(e);
                            this.galleryImages[0].parentNode.style.transition = "0s";
                            this.galleryImages[0].parentNode.style.left = (parseInt(this.galleryImages[this.index + 1].style.left) * -1) + "px";
                            this.galleryImages[0].parentNode.clientWidth;
                            this.galleryImages[0].parentNode.style.transition = "";
                        }, {once: true});
                    }
                } else {
                    // Opacity transition
                    if(preventAnimation){
                        this.galleryImages[prevIndex].style.transition = "0s";
                        this.galleryImages[this.index].style.transition = "0s";
                    }

                    this.galleryImages[prevIndex].style.opacity = 0;
                    this.galleryImages[this.index].style.opacity = 1;
                }

                let chevron;
                if((prevIndex < this.index && (prevIndex != 0 || index == 1)) || (prevIndex == images.length - 1 && this.index == 0)){
                    chevron = this.modal.querySelector(".move-chevron:last-of-type");
                } else {
                    chevron = this.modal.querySelector(".move-chevron:first-of-type");
                }
                chevron.style.animationName = "none";
                chevron.clientWidth;
                chevron.style.animationName = "chevronClick";
                
                this.modal.querySelector(".index").textContent = this.index + 1;

                if(preventAnimation){
                    this.galleryImages[prevIndex].style.transition = "";
                    this.galleryImages[this.index].style.transition = "";
                }
            }

            this.createHtml();
            this.setListeners();
        }
    </script>

    <!-- *************************************************** Movable cube + canvas *************************************************** -->
    <div id=drop-wrapper>
        <div id=movable draggable=true></div>
    </div>

    <div id=canvas-wrapper>
        <canvas id=canvas style="border:2px dashed DeepSkyBlue"></canvas>
    </div>
 
    <div>
        <img id=reflect-canvas>
    </div>

    <style>
        #drop-wrapper{
            height:250px;
            position:relative;
            border: 2px solid #d3d8db;
        }
        .highlight{
            border:2px dashed red !important;
        }
        #movable{
            height:120px;
            width:120px;
            background: rebeccapurple;
            position:absolute;
            cursor: move;
        }
    </style>
    
    <script>        
        // Text
        $("#loading").on("click", function(e){
            if(e.target.classList.contains("editable"))
                return;
            let x = e.offsetX;
            let y = e.offsetY;
            console.log(y);
            $("<div class='editable b' contenteditable=true></div>").appendTo("#loading").css({backgroundColor:"rgba(255,255,255,0.666)", minWidth:"75px", padding:"0.5rem 1rem", width:"px",height:"px",border: "1px solid orange", position:"absolute", top:y+"px", left:x+"px"}).focus();
        });

        // Canvas
        const canvas = document.querySelector("canvas");
        
        canvas.width = $(canvas.parentNode).width() - 4;        // - border
        canvas.height = 240;
        var ctx = canvas.getContext("2d");
        let coord = { x: 0, y: 0 };
        let outOfCanvas = false;

        $("#canvas-wrapper").on("mousedown", start);
        $(window).on("mouseup", stop);

        function start(e){
            $(window).on("mousemove", draw);
            coord.x = e.offsetX;
            coord.y = e.offsetY;
        }
        function stop(e){
            $(window).off("mousemove");
        }

        function draw(e){
            if(e.target.nodeName.toLowerCase() != "canvas"){
                outOfCanvas = true;
                coord.x = e.offsetX;
                coord.y = e.offsetY;
                return;
            }

            if(outOfCanvas){
                // Target was out and now is back to canvas
                outOfCanvas = false;
                coord.x = e.offsetX;
                coord.y = e.offsetY;
            }

            ctx.beginPath();
            ctx.lineWidth = 5;
            ctx.lineCap = "round";
            ctx.strokeStyle = "red";
            ctx.moveTo(coord.x, coord.y);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            coord.x = e.offsetX;
            coord.y = e.offsetY;
            
            $("#reflect-canvas").attr("src", document.querySelector("canvas").toDataURL());
        }
    </script>

    <script>
        var differenceX, differenceY;        // Position of mouseX/Y in object

        $("#drop-wrapper").each(function(index){
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(function(event){
                $(this).on(event, preventDefaults);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).addClass("highlight");});
            });
 
            ['dragleave', 'drop'].forEach(eventName => {
                $(this).on(eventName, () => {$(this).removeClass("highlight")});
            });

            $(this).on("drop", function(e){
                let dropX, dropY;

                if(e.target.id == "movable"){
                    // Dropping object in itself has different offsetX/Y
                    dropX = e.target.offsetLeft + e.offsetX;
                    dropY = e.target.offsetTop + e.offsetY;
                } else {
                    dropX = e.offsetX;
                    dropY = e.offsetY;
                }

                let newX = dropX - differenceX;
                let newY = dropY - differenceY;
                $("#movable").css({top: newY, left: newX});
            });
        });
        
        $("#movable").on("dragstart", function(e){
            differenceX = e.offsetX;
            differenceY = e.offsetY;
            e.target.style.filter = "grayscale(0.8)";
        });
        
        $("#movable").on("dragend", function(e){
            e.target.style.filter = "grayscale(0)";
        });

        function preventDefaults(e){
            e.preventDefault();
            e.stopPropagation();
        }
    </script>

    <script>
        $(function(){
            // Modal
            // Show only once per session ?
            if(true || sessionStorage["modalshown"])
                return;

            // Css
            $("body").append(`<style>#z-modal-full{ top:0; left:0; position: fixed; height:100%; width:100%; display:flex; justify-content: center; align-items: center; background:rgba(0,0,0,0.5); cursor:pointer; } #z-wrapper{ padding:20px; background:white; cursor:default; height:auto; box-shadow: 0px 0px 30px 0px rgb(2 2 2); border-radius:5px; } #z-wrapper { max-width:80%; } #z-wrapper img{ width:100%; } @media (max-width: 850px) { #z-wrapper { max-width:95%; } }</style>`);
            
            // Modal html
            $("<div id=z-modal-full><div id=z-wrapper><img src='https://image.freepik.com/free-photo/galaxy-system-millions-billions-stars-together-with-gas-dust_39386-369.jpg'></div></div>").hide().appendTo("body").fadeIn();
            
            $("#z-modal-full").on("click", function(e){
                if(e.target.id == "z-modal-full"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
            $(window).on("keydown", function(e){
                if(e.key == "Escape"){
                    $("#z-modal-full").fadeOut();
                    sessionStorage["modalshown"] = 1;
                }
            });
        });
    </script>

    <style>
        #z-modal-full{
            top:0;
            left:0;
            position: fixed;
            height:100%;
            width:100%;
            display:flex;
            justify-content: center;
            align-items: center;
            background:rgba(0,0,0,0.5);
            cursor:pointer;
        }
        #z-wrapper{
            padding:20px;
            background:white;
            cursor:default;
            height:auto;
            box-shadow: 0px 0px 30px 0px rgb(2 2 2);
            border-radius:5px;
        }
        #z-wrapper {
            max-width:80%;
        }

        #z-wrapper img{
            width:100%;
        }
        #canvas{
            cursor:crosshair;
            width:100%;
        }
        @media (max-width: 850px) {
            #z-wrapper {
                max-width:95%;
            } 
        }
    </style>

    <!-- *************************************************** IntersectionObserver *************************************************** -->
    <div id=test1>
        <div id=target></div>
    </div>

    <script>
        (function setGoTop(){
            if(!('IntersectionObserver' in window))
                return;
                
            let target = document.querySelector("#target");

            let options = {root: null, rootMargin: "-100px", threshold: 0};

            let observer = new IntersectionObserver(function(entries){
                if(entries[0].isIntersecting){
                    target.style.backgroundColor = "orange";                
                } else {
                    target.style.backgroundColor = "crimson";                
                }
            }, options);

            observer.observe(target);
        })();
    </script>

    <style>
        #test1{
            display: flex;
            height:400px;
            color:red;
        }
        #target{
            height:200px;
            width:200px;
            background-color: crimson;
            transition: 0.5s;
        }
    </style>

    <!-- *************************************************** Paging idk, idc *************************************************** -->
    <script>
        this.createPaging = function(){
            let pagingId = tableEl.id + "-paging";
            let wrapper = document.querySelector("#" + pagingId);
            
            if(!self.perPage){
                if(wrapper){
                    wrapper.innerHTML = "";
                }
                return;
            }

            let pagesCount = Math.ceil(totalResults/self.perPage);
            
            if(pagesCount == 0 || pagesCount == 1){
                if(wrapper){
                    wrapper.innerHTML = "";
                }
                return;
            }

            if(!wrapper){
                let wrapperHtml = "<div id='" + pagingId + "' class=paging-wrapper></div>";

                tableEl.insertAdjacentHTML('beforebegin', wrapperHtml);
            } else {
                wrapper.innerHTML = "";
            }

            let html = "<div class='paging prev " + ((self.pagePos == 1) ? "icon-disabled" : "paging-enabled") + "'><span class='material-icons'>arrow_back_ios_new</span></div>";
            
            let dotsInserted = false;
            for(let i = 1; i < pagesCount + 1; i++){
                // Always render all if 5 or less pages
                if(pagesCount > 5){
                    // Always render first and last
                    if(i != 1 && i != pagesCount){
                        // Always render before pos, pos and after pos
                        if(i + 1 != self.pagePos && i != self.pagePos && i - 1 != self.pagePos){
                            // If first or last pos render at least 2 siblings
                            if(!((self.pagePos == 1 && i - 2 == self.pagePos) || (self.pagePos == pagesCount && i + 2 == self.pagePos))){   
                                if(!dotsInserted){
                                    dotsInserted = true;
                                    html += "<div class='paging-page paging paging-dots'>...</div>"; 
                                }

                                continue;
                            }
                        }
                    }
                }

                let active = (self.pagePos == i) ? "page-active" : "paging-enabled";
                html += "<div class='paging-page paging " + active + "' data-index=" + i + ">" + i + "</div>"; 
                dotsInserted = false;
            }

            html += "<div class='paging next " + ((self.pagePos == pagesCount) ? "icon-disabled" : "paging-enabled") + "'><span class='material-icons'>arrow_forward_ios</span></div>";

            // GoTo
            html += "<label class=paging-goto><input type=number class=myinput placeholder='" + self.pagePos + "' value='" + self.pagePos + "'></label>";

            // Total
            let shownFrom = (self.pagePos - 1) * self.perPage;
            let shownTo = (shownFrom + self.perPage > totalResults) ? totalResults : (shownFrom + self.perPage);
            html += "<div class=paging-info><span class=mobile-hide>Zobrazeno </span><b>" + (shownFrom + 1) + "</b> - <b>" + shownTo + "</b> ze <b>" + totalResults + "</b></div>";

            document.querySelector("#" + pagingId).insertAdjacentHTML('afterbegin', html);

            document.querySelector("#" + pagingId + " .paging-goto input").addEventListener("keydown", function(e){
                if(e.key.toLowerCase() == "enter"){
                    let gotoPage = this.value;
                    if(gotoPage < 1 || gotoPage == self.pagePos || gotoPage > pagesCount)
                        return;

                        self.pagePos = gotoPage;

                    let loadfunction = parentDiv.dataset.loadFunction;
                    loadTableFunctions[loadfunction]();
                }
            });

            document.querySelectorAll("#" + pagingId + " .paging-enabled").forEach(function(el){
                el.addEventListener("click", function(){
                    if(this.classList.contains("prev")){
                        --self.pagePos;
                    } else if(this.classList.contains("next")){
                        ++self.pagePos;
                    } else {
                        self.pagePos = this.dataset.index;
                    }
                    
                    let loadfunction = parentDiv.dataset.loadFunction;
                    loadTableFunctions[loadfunction]();
                });
            });
        }
    </script>

    <style>
        .paging-wrapper {
            display: flex;
            margin: 2rem 0 2rem 0;
            flex-wrap: wrap;
        }
        .paging-wrapper:empty {
            margin: 0;
        }
        .paging-wrapper .next, .paging-wrapper .prev {
            height: 18px;
            padding: 6px 4px;
            margin: 2px 2px;
            color: rgba(0, 0, 0, 0.54);
        }
        .paging-wrapper .next span, .paging-wrapper .prev span {
            font-size: 18px;
        }
        .paging {
            transition: 0.2s;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 4px;
            margin: 0 1px;
            align-self: flex-start;
        }
        .paging:hover {
            background-color: #2dccba;
            color: white;
        }
        .page-active {
            cursor: default;
            background-color: #2dccba;
            color: white;
        }
        .paging-dots {
            cursor: default;
            margin: 0;
            padding: 6px 9px !important;
            background-color: revert !important;
            color: revert !important;
        }
        .paging-info {
            margin-left: auto;
            font-style: italic;
            padding: 6px 0;
            white-space: nowrap;
        }
        .paging-goto {
            color: #888888;
            margin-left: 2rem;
        }
        .paging-goto input {
            margin-left: 0.5rem;
            padding: 0;
            text-align: right;
            width: 50px;
            border-radius: 4px;
            height: 34px;
            padding-right: 1px;
        }
    </style>

<!-- *************************************************** Hold scroll, not entirely done? *************************************************** -->
<script>
    (function scrollHold(){
        return;
        "use strict";
        const delay = 500;
        const triggerMove = window.innerHeight;
        const triggerTimeThreshold = 500;
        // const triggerMove = 100;

        let oldPos = window.scrollY, newPos;
        let triggered = false;
        let triggeredAt = 0;
        let oldTime = 0;
        let delta = 0;
        let Timeout;
        let holdX = 0, holdY = 0;
        let highestDiff = 0;
        
        // Plus debounce ?
        // Nesmi brzdit po tom co se pdf stranka nacetla?
        // only large pdf
        // ignore On home/end buttons + when directly paging?
        //* Dont hold if scrolling is slow!          /s ?
        // Hold scrollTo triggeruje myscroll        - check if e.timeStamp is too close to the last one?

        window.addEventListener("scroll", detectScroll, {passive: true, once: true});

        function detectScroll(e){
            newPos = window.scrollY;
            console.error("WINDOW Y: " + window.scrollY);
            let now = Date.now();
            
            if(!triggered){
                triggered = true;
                oldTime = now;
                triggeredAt = now;
                window.addEventListener("scroll", detectScroll, {passive: true, once: true});
                Timeout = setTimeout(function(){
                    detectScroll();
                }, delay + 50);
                return;
            }

            if(oldTime > now - delay){
                // Keep counting
                let newDiff = newPos - oldPos;
                
                console.log("NEWPOS  " + newPos);
                console.log("OLDPOS  " + oldPos);
                console.log("-------------------------");
                console.log("POS difference: " + newDiff);
                console.log("-------------------------");
                console.log("DELTA BEFORE " + delta);
                // ONLY WORKS DOWNSCROLL
                if(Math.abs(highestDiff) > Math.abs(newDiff)){
                    console.log("highestDiff YES: " + highestDiff);
                    delta += (highestDiff);
                }

                oldTime = now;
                console.log("DELTA AFTER " + delta);
                
                highestDiff = newDiff;
                
                if(Math.abs(delta) > triggerMove){
                    // Surpress scroll
                    if(holdX || holdY){
                        console.log("BEFORE:" + window.scrollY);
                        window.scrollTo(holdX, holdY);
                        console.log("AFTER: " + window.scrollY);
                        // READD ONCE?
                    } else {
                        if(triggeredAt > now - triggerTimeThreshold){
                            holdX = window.scrollX;
                            holdY = window.scrollY;
                        } else {
                            console.warn("ELSEeeeeeeee");
                            resetScroll();
                        }
                    }
                }

                window.addEventListener("scroll", detectScroll, {passive: true, once: true});
                clearTimeout(Timeout);
                Timeout = setTimeout(function(){
                    detectScroll();
                }, delay + 100);
            } else {
                resetScroll();
            }

            if(!(Math.abs(delta) > triggerMove))
                oldPos = newPos;
            else
                oldPos = holdY;
        }

        function resetScroll(){
            console.log("delta---------------------------------------------- " + delta);
            delta = 0;
            holdX = 0;
            holdY = 0;
            clearTimeout(Timeout);
            triggered = false;
            window.addEventListener("scroll", detectScroll, {passive: true, once: true});   
        }
    })();
</script>
